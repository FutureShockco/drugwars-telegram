(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["newcontract"],{"86a8":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("ContractsTabs"),r("div",{staticClass:"p-4 text-center"},[r("h2",[t._v("Create a contract")]),r("div",{staticClass:"width-full text-center"},[r("div",{staticClass:"columns mt-4"},[r("div",{staticClass:"column col-3"},[r("ProgressBar",{attrs:{icon:"drug",color:"#00b31e",width:70,"font-size":"20",pv:t.progressPercent(t.drugs_amount,t.balances.drugs),total:t.drugs_amount,cost:t.balances.drugs,bold:12,"text-bg-color":"#1f1f1f",during:3,"border-color":"#ffc508","bg-color":"#fbb034","text-color":"#ffffff"}}),r("input",{directives:[{name:"model",rawName:"v-model",value:t.drugs_amount,expression:"drugs_amount"}],staticClass:"mt-5 input width-full",attrs:{type:"number",placeholder:"amount"},domProps:{value:t.drugs_amount},on:{input:function(e){e.target.composing||(t.drugs_amount=e.target.value)}}})],1),r("div",{staticClass:"column col-3"},[r("ProgressBar",{attrs:{icon:"weapon",color:"#00b31e",width:70,"font-size":"20",pv:t.progressPercent(t.weapons_amount,t.balances.weapons),total:t.weapons_amount,cost:t.balances.weapons,bold:12,"text-bg-color":"#1f1f1f",during:3,"border-color":"#ffc508","bg-color":"#fbb034","text-color":"#ffffff"}}),r("input",{directives:[{name:"model",rawName:"v-model",value:t.weapons_amount,expression:"weapons_amount"}],staticClass:"mt-5 input width-full",attrs:{type:"number",placeholder:"amount"},domProps:{value:t.weapons_amount},on:{input:function(e){e.target.composing||(t.weapons_amount=e.target.value)}}})],1),r("div",{staticClass:"column col-3"},[r("ProgressBar",{attrs:{icon:"alcohol",color:"#00b31e",width:70,"font-size":"20",pv:t.progressPercent(t.alcohol_amount,t.balances.alcohols),total:t.alcohol_amount,cost:t.balances.alcohols,bold:12,"text-bg-color":"#1f1f1f",during:3,"border-color":"#ffc508","bg-color":"#fbb034","text-color":"#ffffff"}}),r("input",{directives:[{name:"model",rawName:"v-model",value:t.alcohol_amount,expression:"alcohol_amount"}],staticClass:"mt-5 input width-full",attrs:{type:"number",placeholder:"amount"},domProps:{value:t.alcohol_amount},on:{input:function(e){e.target.composing||(t.alcohol_amount=e.target.value)}}})],1),r("div",{staticClass:"column col-3"},[r("ProgressBar",{attrs:{icon:"dwd",color:"#00b31e",width:70,"font-size":"20",pv:t.progressPercent(t.dwd_amount,t.user.dwd),total:t.dwd_amount,cost:t.user.dwd,bold:12,"text-bg-color":"#1f1f1f",during:3,"border-color":"#ffc508","bg-color":"#fbb034","text-color":"#ffffff"}}),r("input",{directives:[{name:"model",rawName:"v-model",value:t.dwd_amount,expression:"dwd_amount"}],staticClass:"mt-5 input width-full",attrs:{type:"number",placeholder:"amount"},domProps:{value:t.dwd_amount},on:{input:function(e){e.target.composing||(t.dwd_amount=e.target.value)}}})],1)])]),r("div",{staticClass:"mt-2 container-xxs"},[r("h5",[t._v("Target")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.target,expression:"target"},{name:"lowercase",rawName:"v-lowercase"}],staticClass:"input input-primary mb-2",attrs:{maxlength:"16",placeholder:"The nickname of your target"},domProps:{value:t.target},on:{input:function(e){e.target.composing||(t.target=e.target.value)}}}),r("h5",[t._v("Units to kill (defined by supply count)")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.supply,expression:"supply"}],staticClass:"input input-primary mb-2",attrs:{placeholder:"The supply count to reduce",type:"number"},domProps:{value:t.supply},on:{input:function(e){e.target.composing||(t.supply=e.target.value)}}}),r("UiButton",{staticClass:"button input-block button-green mb-2",attrs:{disabled:t.isLoading},on:{click:t.handleSubmit}},[t.isLoading?r("SmallLoading"):r("span",[t._v("Create or contribute")])],1),r("UiButton",{staticClass:"button input-block button-blue mb-2",attrs:{disabled:t.isLoading},on:{click:t.handleSubmitAnonymous}},[t.isLoading?r("SmallLoading"):r("span",[t._v("Create or contribute anonymously")])],1),r("h6",[t._v("Example to calculate the supply count :")]),r("div",[t._v("1000 bouncers = 2000 supply")]),r("div",[t._v("1000 mercenaries = 8000 supply")]),r("div",[t._v("1000 bouncers + 1000 mercenaries = 10000 supply")]),r("div",{staticClass:"mt-2"},[t._v("The supply value of each unit can be found in the bootcamp")])],1),t.errorMessage?r("p",{staticClass:"text-red text-center"},[t._v(t._s(t.errorMessage))]):t._e()])],1)},s=[],n=r("59ad"),o=r.n(n),i=(r("c5f6"),r("e814")),u=r.n(i),c=(r("96cf"),r("3b8d")),l=r("cebc"),d=(r("7514"),r("2f62")),g=r("a2b6"),m=r("451e"),p={data:function(){return{isLoading:!1,target:this.$route.query.target||null,errorMessage:null,drugs_amount:0,weapons_amount:0,alcohol_amount:0,dwd_amount:0,supply:null}},computed:{user:function(){return this.$store.state.game.user.user},nickname:function(){return this.$store.state.game.user.user.nickname},base:function(){return this.$store.state.game.mainbase},HQ:function(){var t=this;return this.base&&this.$store.state.game.user.buildings.find((function(e){return"headquarters"===e.building&&e.territory===t.base.territory&&e.base===t.base.base}))?this.$store.state.game.user.buildings.find((function(e){return"headquarters"===e.building&&e.territory===t.base.territory&&e.base===t.base.base})):this.$store.state.game.user.buildings.find((function(t){return"headquarters"===t.building}))},balances:function(){var t=this,e=0;this.$store.state.game.user.buildings.find((function(e){return"operation_center"===e.building&&e.territory===t.base.territory&&e.base===t.base.base}))&&(e=this.$store.state.game.user.buildings.find((function(e){return"operation_center"===e.building&&e.territory===t.base.territory&&e.base===t.base.base})).lvl);var r=0;this.$store.state.game.gang_buildings.find((function(t){return"scientific_lab"===t.building}))&&(r=this.$store.state.game.gang_buildings.find((function(t){return"scientific_lab"===t.building})).lvl);var a=0;this.$store.state.game.gang_buildings.find((function(t){return"weapon_center"===t.building}))&&(a=this.$store.state.game.gang_buildings.find((function(t){return"weapon_center"===t.building})).lvl);var s=0;return this.$store.state.game.gang_buildings.find((function(t){return"distillery_school"===t.building}))&&(s=this.$store.state.game.gang_buildings.find((function(t){return"distillery_school"===t.building})).lvl),Object(g["a"])(this.HQ,e,r,a,s,this.$store.state.ui.timestamp)},hasEnough:function(){return this.balances.drugs>this.gangCreationFee.drugs&&this.balances.weapons>this.gangCreationFee.weapons&&this.balances.alcohols>this.gangCreationFee.alcohols}},methods:Object(l["a"])({},Object(d["b"])(["send","notify"]),{handleSubmit:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,r,a,s,n,o,i,c=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.validateForm();case 2:e=t.sent,this.isLoading=!0,r=this.drugs_amount||0,a=this.weapons_amount||0,s=this.alcohol_amount||0,n=this.dwd_amount||0,o=u()(this.supply),e&&this.target||r>0||a>0||s>0||n>0?(i={territory:Number(this.base.territory),base:Number(this.base.base),target:this.target.trim().toLowerCase(),resources:{drugs:r,weapons:a,alcohol:s,dwd:n},supply:o,type:"dw-contracts",anonymous:!1},this.send(i).then((function(){c.$router.push("/contracts"),c.isLoading=!1})).catch((function(t){c.notify({type:"error",message:"Failed to create gang"}),console.error("Failed to create gang",t),c.isLoading=!1}))):this.isLoading=!1;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleSubmitAnonymous:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,r,a,s,n,o,i,c=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.validateForm();case 2:e=t.sent,this.isLoading=!0,r=this.drugs_amount||0,a=this.weapons_amount||0,s=this.alcohol_amount||0,n=this.dwd_amount||0,o=u()(this.supply),e&&this.target||r>0||a>0||s>0||n>0?(i={territory:Number(this.base.territory),base:Number(this.base.base),target:this.target.trim().toLowerCase(),resources:{drugs:r,weapons:a,alcohol:s,dwd:n},type:"dw-contracts",supply:o,anonymous:!0},this.send(i).then((function(){c.$router.push("/contracts"),c.isLoading=!1})).catch((function(t){c.notify({type:"error",message:"Failed to create gang"}),console.error("Failed to create gang",t),c.isLoading=!1}))):this.isLoading=!1;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),validateForm:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.errorMessage=null,e=this.target.toLowerCase(),e===this.nickname&&(this.errorMessage="Attack yourself? Are you serious?"),r=new Date,a=new Date(Date.parse(this.$store.state.game.user.user.punished)),a>r&&(this.errorMessage="Hmm Bad talks are not appropriated in DrugWars, try again after ".concat(a.toLocaleString())),this.errorMessage){t.next=20;break}return t.prev=7,t.next=10,m["a"].requestAsync("check_user",e);case 10:return s=t.sent,s&&s[0].nickname||(this.errorMessage="Player '".concat(e,"' does not exist")),t.abrupt("return",!this.errorMessage);case 15:return t.prev=15,t.t0=t["catch"](7),this.errorMessage="Player with nickname '".concat(e,"' doesn't exist"),console.error("Player with nickname '".concat(e,"' doesn't exist"),t.t0),t.abrupt("return",!1);case 20:if(!this.errorMessage){t.next=22;break}return t.abrupt("return",!1);case 22:return t.abrupt("return",!this.errorMessage);case 23:case"end":return t.stop()}}),t,this,[[7,15]])})));function e(){return t.apply(this,arguments)}return e}(),progressPercent:function(t,e){var r;return t&&e?(this.up=!1,r=o()(100*t/e).toFixed(2),r):(this.up=!1,0)}})},h=p,b=r("2877"),f=Object(b["a"])(h,a,s,!1,null,"83ce99ae",null);e["default"]=f.exports}}]);
//# sourceMappingURL=newcontract.7b9e8936.js.map