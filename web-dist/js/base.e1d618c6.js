(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["base"],{"3f94":function(e,t,r){"use strict";var i=r("8c77"),s=r.n(i);s.a},"8c77":function(e,t,r){},c45a:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("OverviewTabs"),r("div",{staticClass:"p-4 text-center anim-fade-in"},[r("h2",[e._v("RENAME YOUR BASE")]),r("h4",[e._v("Current name "),r("div",{staticClass:"text-yellow"},[e._v(e._s(e.ownBase.custom))])]),"primary"===e.ownBase.custom?r("h5",{staticClass:"text-red"},[e._v("You can not rename your primary base")]):r("form",{staticClass:"form container-xxs",on:{submit:function(t){return t.preventDefault(),e.handleRename(t)}}},[r("h6",[e._v("New name ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.base_name,expression:"base_name"}],staticClass:"input input-primary mb-2",attrs:{type:"text"},domProps:{value:e.base_name},on:{input:function(t){t.target.composing||(e.base_name=t.target.value)}}}),r("UiButton",{staticClass:"button btn-block button-green mb-2",attrs:{disabled:e.isLoading||e.waitingConfirmation||e.requireUpdate||e.inProgress||"primary"===e.ownBase.custom||!e.base_name}},[e._v("\n        Change name\n        ")])],1),r("h2",[e._v("MOVE YOUR BASE TO ANOTHER SPOT")]),r("h5",[e._v("Be carefull, everybody can recover your old location on the map. You will keep all your buildings and your units. You can not move if you have any fights which are still ongoing.")]),r("h4",[e._v("Current coordinates "),r("div",{staticClass:"text-yellow"},[e._v(e._s(e.ownBase.territory)+" : "+e._s(e.ownBase.base))])]),r("form",{staticClass:"form container-xxs",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[r("h6",[e._v("Territory ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.target_territory,expression:"target_territory"}],staticClass:"input input-primary mb-2",attrs:{type:"number"},domProps:{value:e.target_territory},on:{input:function(t){t.target.composing||(e.target_territory=t.target.value)}}}),r("h6",[e._v("Location ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.target_base,expression:"target_base"}],staticClass:"input input-primary mb-2",attrs:{type:"number"},domProps:{value:e.target_base},on:{input:function(t){t.target.composing||(e.target_base=t.target.value)}}}),r("h5",[e._v("   "+e._s(e.upgradeLabel))]),r("UiButton",{staticClass:"button btn-block button-yellow mb-2",attrs:{disabled:e.isLoading||e.waitingConfirmation||e.requireUpdate||e.notEnoughDWD||e.inProgress||!e.ownBase||!e.target_base||!e.target_territory}},[r("img",{staticClass:"dwdicon",attrs:{src:"//img.drugwars.io/icons/dwd.png"}}),e.dwdPrice?r("span",[e._v(" $"+e._s(e._f("amount")(e.dwdPrice))+" = ")]):e._e(),e._v("\n          "+e._s(e.price)+" DWD\n        ")])],1),e.errorMessage?r("h4",{staticClass:"text-red"},[e._v("Please select a valid territory")]):e._e()])],1)},s=[],a=(r("c5f6"),r("cebc")),n=(r("7514"),r("2f62")),o=r("7edb"),u=r("a2b6"),l={props:["inProgress"],data:function(){return{isLoading:!1,waitingConfirmation:!1,target_territory:null,target_base:null,base_name:null,errorMessage:null}},watch:{inProgress:function(e){e&&(this.waitingConfirmation=!1)}},computed:{ownBase:function(){return this.$store.state.game.mainbase},updateTime:function(){return o["utils"].calculateTimeToBuild(this.id,this.coeff,this.level,this.hqLevel)},price:function(){return 100},dwdPrice:function(){var e=this.$store.state.game.prizeProps.seProps.lastPrice;return e*this.price*this.$store.state.game.prizeProps.steemprice},notEnoughDWD:function(){return this.price>this.$store.state.game.user.user.dwd},timeToWait:function(){var e=this,t=this.$store.state.game.user.buildings.find((function(t){return t.building===e.id&&t.territory===e.ownBase.territory&&t.base===e.ownBase.base}));if(t){if(t.pending_update){var r=new Date(t.pending_update).getTime(),i=this.$store.state.ui.timestamp,s=r-i;return s>0?s:0}var a=new Date(t.next_update).getTime(),n=this.$store.state.ui.timestamp,o=a-n;return o>0?o:0}return 0},requireUpdate:function(){return this.level>this.hqLevel&&"headquarters"!==this.id},upgradeLabel:function(){var e="";return this.target_territory&&this.target_base&&(e="You are moving your base from ".concat(this.ownBase.territory,":").concat(this.ownBase.base," to ").concat(this.target_territory,":").concat(this.target_base)),this.notEnough&&(e="Miss resources"),this.inProgress&&(e="Upgrading"),e},base:function(){return this.$store.state.game.mainbase},HQ:function(){var e=this;return this.ownBase&&this.$store.state.game.user.buildings.find((function(t){return"headquarters"===t.building&&t.territory===e.ownBase.territory&&t.base===e.ownBase.base}))?this.$store.state.game.user.buildings.find((function(t){return"headquarters"===t.building&&t.territory===e.ownBase.territory&&t.base===e.ownBase.base})):this.$store.state.game.user.buildings.find((function(e){return"headquarters"===e.building}))},balances:function(){var e=this,t=0;this.$store.state.game.user.buildings.find((function(t){return"operation_center"===t.building&&t.territory===e.ownBase.territory&&t.base===e.ownBase.base}))&&(t=this.$store.state.game.user.buildings.find((function(t){return"operation_center"===t.building&&t.territory===e.ownBase.territory&&t.base===e.ownBase.base})).lvl);var r=0;this.$store.state.game.gang_buildings.find((function(e){return"scientific_lab"===e.building}))&&(r=this.$store.state.game.gang_buildings.find((function(e){return"scientific_lab"===e.building})).lvl);var i=0;this.$store.state.game.gang_buildings.find((function(e){return"weapon_center"===e.building}))&&(i=this.$store.state.game.gang_buildings.find((function(e){return"weapon_center"===e.building})).lvl);var s=0;return this.$store.state.game.gang_buildings.find((function(e){return"distillery_school"===e.building}))&&(s=this.$store.state.game.gang_buildings.find((function(e){return"distillery_school"===e.building})).lvl),Object(u["a"])(this.HQ,t,r,i,s,this.$store.state.ui.timestamp)}},methods:Object(a["a"])({},Object(n["b"])(["send"]),{handleSubmit:function(){var e=this,t=this;if(this.errorMessage=null,this.target_territory>460&&(this.errorMessage="Please choose a name for your base"),this.target_base>225&&(this.errorMessage="Please choose a shorter name for your base"),!this.errorMessage){this.isLoading=!0;var r={type:"move-base",from_territory:Number(t.ownBase.territory),from_base:Number(t.ownBase.base),territory:Number(t.target_territory),base:Number(t.target_base)};this.send(r).then((function(){e.isLoading=!1,e.init()})).catch((function(t){e.notify({type:"error",message:"Failed to move base please check that the location is empty and you dont have any fight going from or coming to your base"}),console.error("Failed to move base",t),e.isLoading=!1}))}},handleRename:function(){var e=this,t=this;if(this.errorMessage=null,this.base_name.length>44&&(this.errorMessage="Please choose a name a shorter name for your base"),!this.errorMessage){this.isLoading=!0;var r={type:"rename-base",from_territory:Number(t.ownBase.territory),from_base:Number(t.ownBase.base),name:t.base_name};this.send(r).then((function(){e.isLoading=!1,e.init()})).catch((function(t){e.notify({type:"error",message:"Failed to rename base please"}),console.error("Failed to move base",t),e.isLoading=!1}))}}})},c=l,g=(r("3f94"),r("2877")),d=Object(g["a"])(c,i,s,!1,null,"2f76e93e",null);t["default"]=d.exports}}]);
//# sourceMappingURL=base.e1d618c6.js.map