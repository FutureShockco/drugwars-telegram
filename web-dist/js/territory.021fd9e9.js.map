{"version":3,"sources":["webpack:///./node_modules/core-js/modules/_array-fill.js","webpack:///./node_modules/core-js/modules/es6.array.fill.js","webpack:///./src/views/Map/Territory.vue?2ab1","webpack:///src/views/Map/Territory.vue","webpack:///./src/views/Map/Territory.vue?9f61","webpack:///./src/views/Map/Territory.vue","webpack:///./src/views/Map/Territory.vue?5402"],"names":["toObject","toAbsoluteIndex","toLength","module","exports","value","O","this","length","aLen","arguments","index","undefined","end","endPos","$export","P","fill","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","on","$event","decreaseLocation","directives","name","rawName","expression","attrs","domProps","updateLocation","currentLocation","target","composing","increaseLocation","location","style","_m","selectedTile","_v","_s","currentNickname","currentGang","role","ticker","_e","nickname","currentHq","main","handleSubmit","staticRenderFns","data","isMain","isLoading","selected","customName","job","$store","state","game","user","bases","dragging","iso","x","y","maprng","canvasWidth","watch","val","console","log","computed","base","buildings","find","$route","query","mainbase","ownOccupationTroop","units","methods","$router","push","start","clearCanvas","ctx","clearRect","width","height","Tile","id","level","gang","custom_name","workWidth","workHeight","fillColor","strokeStyle","bg","offsetWidth","canvas_element","self","checkClick","event","tiles_array","forEach","element","tile","hq","createTiles","quantityX","quantityY","tileWidth","tileHeight","i","lvl","custom","drawPosition","onclick","e","elementClickedId","visitTitle","display","top","left","right","drawTiles","background","src","onload","context","imageSmoothingEnabled","drawImage","canvas","restore","lvl9","lvl8","lvl7","lvl6","lvl5","lvl4","lvl3","lvl2","lvl1","tiles","beginPath","fillStyle","select","enemy","lineWidth","stroke","textAlign","font","strokeText","fillText","home","buildingtop","pool","heliport","tree","buildingbottom","fountain","selectBase","setMainBase","seed","a","c","m","numbers","client","result","mounted","lcg","component"],"mappings":"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","file":"js/territory.021fd9e9.js","sourcesContent":["// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { fill: require('./_array-fill') });\n\nrequire('./_add-to-unscopables')('fill');\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('ActionsTabs'),_c('div',{staticClass:\"card mb-0\",staticStyle:{\"margin-top\":\"-15px\"}},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"tabs tabs-box\"},[_c('div',{staticClass:\"tab-controls rounded-s border-highlight\"},[_c('UiButton',{staticClass:\" gradient-highlight\",on:{\"click\":function($event){_vm.decreaseLocation()}}},[_c('i',{staticClass:\"fad fa-arrow-left color-black\"})]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentLocation),expression:\"currentLocation\"}],staticClass:\"input color-highlight w-100\",attrs:{\"type\":\"number\",\"placeholder\":\"25\"},domProps:{\"value\":(_vm.currentLocation)},on:{\"change\":function($event){_vm.updateLocation(_vm.currentLocation)},\"input\":function($event){if($event.target.composing){ return; }_vm.currentLocation=$event.target.value}}}),_c('UiButton',{staticClass:\"gradient-highlight\",on:{\"click\":function($event){_vm.increaseLocation()}}},[_c('i',{staticClass:\"fad fa-arrow-right color-black\"})])],1)]),_c('div',{staticClass:\"d-flex\"})])]),(_vm.location > 5000 || _vm.location < 1)?_c('div',[_c('div',{staticClass:\"card card-style shadow-card shadow-card-l\",staticStyle:{\"min-height\":\"150px\"},style:(\"background-image:url(/img/tasks/42.jpg\")},[_vm._m(0),_c('div',{staticClass:\"card-overlay bg-gradient-fade opacity-80\"})])]):_c('div',{staticClass:\"territorybg\",staticStyle:{\"height\":\"100vw\",\"width\":\"100vw\"},attrs:{\"id\":\"territorybg\"}},[_c('div',{staticClass:\"title\",style:(_vm.selectedTile ? 'display: block;' : 'display:none'),attrs:{\"id\":\"title\"}},[_c('h5',[_vm._v(\"BASE \"+_vm._s(_vm.selectedTile))]),_c('div',{staticClass:\"mt-0\"},[(_vm.currentNickname)?_c('div',[_vm._v(\" Under the control of : \"),_c('h5',[_vm._v(_vm._s(_vm.currentNickname))])]):_c('span',[_vm._v(\"Nobody lives here \")]),(_vm.currentGang && _vm.currentGang.role !== null && _vm.currentGang.ticker)?_c('div',[_vm._v(\"\\n          \"+_vm._s(_vm.currentGang.role)+\" of \"+_vm._s(_vm.currentGang.name)+\" [\"+_vm._s(_vm.currentGang.ticker)+\"]\\n        \")]):_vm._e()]),(_vm.selectedTile && _vm.nickname)?_c('div',[_c('div',{staticClass:\"mt-0\"},[_vm._v(\"HQ LEVEL : \"+_vm._s(_vm.currentHq))])]):_vm._e(),_c('div',{staticClass:\"map-title text-left\",attrs:{\"id\":\"visit\"}},[(_vm.selectedTile && _vm.currentNickname && _vm.currentNickname != _vm.nickname)?_c('router-link',{attrs:{\"to\":(\"/actions?type=attack&target=\" + _vm.location + \"&base=\" + _vm.selectedTile)}},[_c('UiButton',{staticClass:\"btn bg-red-light border-red-dark\"},[_vm._v(\"ATTACK\")])],1):_vm._e(),(!_vm.main)?_c('UiButton',{staticClass:\"btn gradient-highlight text-black\",on:{\"click\":function($event){_vm.handleSubmit()}}},[_vm._v(\"\\n          CHOOSE AS MAIN BASE\\n        \")]):_vm._e()],1)]),_vm._m(1)])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card-bottom pb-3 px-3\"},[_c('h3',{staticClass:\"color-white\"},[_vm._v(\"Out of City\")]),_c('p',{staticClass:\"color-white opacity-70 mb-0 mt-n1\"},[_vm._v(\"This location is not available yet.\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('table',{staticStyle:{\"position\":\"relative\"},attrs:{\"id\":\"table\"}},[_c('div',{staticClass:\"overlay\"}),_c('canvas',{staticStyle:{\"cursor\":\"pointer\",\"height\":\"100vw\",\"width\":\"100vw\"},attrs:{\"id\":\"canvas\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <ActionsTabs />\n    <div class=\"card mb-0\" style=\"margin-top: -15px;\">\n      <div class=\"content\">\n        <div class=\"tabs tabs-box\">\n          <div class=\"tab-controls rounded-s border-highlight\">\n            <UiButton class=\" gradient-highlight\" @click=\"decreaseLocation()\">\n              <i class=\"fad fa-arrow-left color-black\"></i>\n            </UiButton>\n\n            <input type=\"number\" v-model=\"currentLocation\" placeholder=\"25\" class=\"input color-highlight w-100\"\n              @change=\"updateLocation(currentLocation)\" />\n\n\n            <UiButton class=\"gradient-highlight\" @click=\"increaseLocation()\">\n              <i class=\"fad fa-arrow-right color-black\"></i>\n            </UiButton>\n          </div>\n        </div>\n        <div class=\"d-flex\">\n\n        </div>\n      </div>\n    </div>\n    <div v-if=\"location > 5000 || location < 1\">\n      <div class=\"card card-style shadow-card shadow-card-l\" style=\"min-height: 150px;\"\n        :style=\"`background-image:url(/img/tasks/42.jpg`\">\n        <div class=\"card-bottom pb-3 px-3\">\n          <h3 class=\"color-white\">Out of City</h3>\n          <p class=\"color-white opacity-70 mb-0 mt-n1\">This location is not available yet.</p>\n        </div>\n        <div class=\"card-overlay bg-gradient-fade opacity-80\"></div>\n      </div>\n    </div>\n    <div v-else id=\"territorybg\" class=\"territorybg\" style=\"height:100vw;width: 100vw;\">\n      <div :style=\"selectedTile ? 'display: block;' : 'display:none'\" class=\"title\" id=\"title\">\n        <h5>BASE {{ selectedTile }}</h5>\n        <div class=\"mt-0\">\n          <div v-if=\"currentNickname\"> Under the control of : <h5>{{ currentNickname }}</h5>\n          </div>\n          <span v-else>Nobody lives here </span>\n          <div v-if=\"currentGang && currentGang.role !== null && currentGang.ticker\">\n            {{ currentGang.role }} of {{ currentGang.name }} [{{ currentGang.ticker }}]\n          </div>\n        </div>\n        <div v-if=\"selectedTile && nickname\">\n          <!-- <h6>INFORMATIONS</h6> -->\n          <div class=\"mt-0\">HQ LEVEL : {{ currentHq }}</div>\n          <!-- <div class=\"mt-0\">DETAIL : {{ customName }}</div> -->\n        </div>\n        <div class=\"map-title text-left\" id=\"visit\">\n          <router-link v-if=\"selectedTile && currentNickname && currentNickname != nickname\"\n            :to=\"`/actions?type=attack&target=${location}&base=${selectedTile}`\">\n            <UiButton class=\"btn bg-red-light border-red-dark\">ATTACK</UiButton>\n          </router-link>\n          <!-- <router-link v-if=\"selectedTile && currentNickname && currentNickname != nickname\"\n            :to=\"`/actions?type=transport&target=${location}&base=${selectedTile}`\">\n            <UiButton class=\"button button-blue\">TRANSPORT</UiButton>\n          </router-link> -->\n          <!-- <router-link v-else-if=\"currentNickname != nickname && base\"\n            :to=\"`/actions?type=occupy&target=${location}&base=${selectedTile}`\">\n            <UiButton class=\"button button-blue\">CREATE NEW BASE</UiButton>\n          </router-link> -->\n          <!-- <UiButton v-if=\"\n            currentNickname === nickname && location == base.territory && selectedTile == base.base\n          \" class=\"button button-blue\">\n            ALREADY SELECTED\n          </UiButton>\n          <div v-else-if=\"currentNickname === nickname\">\n            <UiButton class=\"button button-blue\" @click=\"selectBase()\">SELECT</UiButton>\n            <router-link :to=\"`/actions?type=transport&target=${location}&base=${selectedTile}`\">\n              <UiButton class=\"button button-blue\">TRANSPORT</UiButton>\n            </router-link>\n          </div> -->\n          <UiButton v-if=\"!main\" class=\"btn gradient-highlight text-black\" @click=\"handleSubmit()\">\n            CHOOSE AS MAIN BASE\n          </UiButton>\n        </div>\n      </div>\n      <table id=\"table\" style=\"position: relative;\">\n        <div class=\"overlay\"></div>\n        <canvas id=\"canvas\" style=\"cursor: pointer;height:100vw;width: 100vw;\"></canvas>\n      </table>\n\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport client from '@/helpers/client';\nimport { mapActions } from 'vuex';\nimport Promise from 'bluebird';\n\nexport default {\n  data() {\n    return {\n      isMain: null,\n      isLoading: false,\n      selectedTile: null,\n      selected: null,\n      customName: null,\n      currentNickname: null,\n      currentGang: null,\n      currentHq: null,\n      job: null,\n      nickname: this.$store.state.game.user.user.nickname,\n      bases: [],\n      currentLocation: null,\n      dragging: false,\n      iso: false,\n      x: 'no',\n      y: 'no',\n      maprng: null,\n      canvasWidth: 500\n    };\n  },\n  watch: {\n    location(val) {\n      if (val) {\n        console.log(val);\n        this.updateLocation()\n      }\n    },\n  },\n  computed: {\n    main() {\n      if (this.base) return this.$store.state.game.user.buildings.find((b) => b.main === 1) || null;\n    },\n    location() {\n      return this.$route.query.location || null;\n    },\n    base() {\n      return this.$store.state.game.mainbase;\n    },\n    ownOccupationTroop() {\n      if (this.$store.state.game.user.units.find((u) => u.unit === 'occupation_troop'))\n        return (\n          this.$store.state.game.user.units.find((u) => u.unit === 'occupation_troop').amount || {\n            amount: 0,\n          }\n        );\n      return 0;\n    },\n  },\n  methods: {\n\n    increaseLocation() {\n      this.$router.push({ path: `/map/territory?location=${Number(this.location) + 1}` });\n    },\n    decreaseLocation() {\n      this.$router.push({ path: `/map/territory?location=${Number(this.location) - 1}` });\n    },\n    start() {\n      const self = this;\n      const bg = document.getElementById('territorybg');\n      const canvas_element = document.getElementById('canvas');\n\n      const context = canvas_element.getContext('2d');\n      let tiles_array = [];\n\n      let width = 0;\n      let height = 0;\n\n      width = bg.offsetWidth;\n      height = bg.offsetWidth;\n      canvas_element.width = width;\n      canvas_element.height = height;\n      self.canvasWidth = width;\n      function clearCanvas() {\n        const ctx = canvas_element.getContext('2d');\n        ctx.clearRect(0, 0, width, height);\n      }\n\n      function Tile(\n        x,\n        y,\n        width,\n        height,\n        id,\n        nickname,\n        level,\n        custom_name,\n        main,\n        gang,\n        job,\n        fillColor,\n        strokeStyle\n      ) {\n        this.id = id;\n        this.nickname = nickname || null;\n        this.level = level || null;\n        this.gang = gang || null;\n        this.job = job || null;\n        this.custom_name = custom_name || null;\n        this.main = main || null;\n        this.x = x;\n        this.y = y;\n        this.width = 50;\n        this.height = 50;\n        this.workWidth = {\n          start: x,\n          end: x + width,\n        };\n        this.workHeight = {\n          start: y,\n          end: y + height,\n        };\n        this.fillColor = fillColor;\n        this.strokeStyle = 'red';\n      }\n\n      const visitTitle = document.getElementById('title');\n      canvas_element.onclick = function (e) {\n        event = e;\n        console.log(e)\n        const elementClickedId = checkClick(event, canvas_element);\n        if (self.selectedTile != null && self.nickname === self.currentNickname) {\n          tiles_array[self.selectedTile - 1].fillColor = 'green';\n          clearCanvas();\n        } else if (\n          self.selectedTile != null &&\n          self.currentNickname &&\n          self.nickname !== self.currentNickname\n        ) {\n          tiles_array[self.selectedTile - 1].fillColor = 'red';\n          clearCanvas();\n        } else if (self.selectedTile != null && !self.currentNickname && self.job) {\n          tiles_array[self.selectedTile - 1].fillColor = '#f6bb428f';\n        } else if (self.selectedTile != null) {\n          tiles_array[self.selectedTile - 1].fillColor = null;\n        }\n        // if (elementClickedId.job === self.job) {\n        //   tiles_array[224].fillColor = '#ffc508';\n        // } else \n        // if (elementClickedId.nickname === self.nickname) {\n        //   tiles_array[224].fillColor = 'green';\n        // } else if (elementClickedId.nickname !== self.nickname) {\n        //   tiles_array[224].fillColor = 'blue';\n        // } else {\n        //   tiles_array[224].fillColor = 'gray';\n        // }\n\n        self.selectedTile = elementClickedId.id;\n        self.currentNickname = elementClickedId.nickname;\n        self.currentHq = elementClickedId.hq;\n        self.customName = elementClickedId.custom_name;\n        self.isMain = elementClickedId.main;\n        self.currentGang = elementClickedId.gang;\n        self.job = elementClickedId.job;\n        if (elementClickedId.job && !elementClickedId.nickname) {\n          tiles_array[elementClickedId.id - 1].fillColor = '#ffc508';\n        } else if (elementClickedId.nickname === self.nickname) {\n          tiles_array[elementClickedId.id - 1].fillColor = 'green';\n        } else if (elementClickedId.nickname !== self.nickname) {\n          tiles_array[elementClickedId.id - 1].fillColor = '#ffc508';\n        } else {\n          tiles_array[elementClickedId.id - 1].fillColor = 'gray';\n        }\n\n        if (tiles_array[elementClickedId.id] && !elementClickedId.job) {\n          visitTitle.style.display = 'block';\n          if (tiles_array[elementClickedId.id].x === 0) {\n            visitTitle.style.top = `${tiles_array[elementClickedId.id].y + 4}px`;\n            visitTitle.style.left = `initial`;\n            visitTitle.style.right = `${48}px`;\n          } else if (\n            tiles_array[elementClickedId.id].x > canvas_element.width / 2 ||\n            tiles_array[elementClickedId.id].x > canvas_element.width\n          ) {\n            visitTitle.style.top = `${tiles_array[elementClickedId.id].y + 54}px`;\n            visitTitle.style.left = `initial`;\n            visitTitle.style.right = `${canvas_element.width - tiles_array[elementClickedId.id].x + 48\n              }px`;\n          } else {\n            visitTitle.style.top = `${tiles_array[elementClickedId.id].y + 54}px`;\n            visitTitle.style.right = `initial`;\n            visitTitle.style.left = `${tiles_array[elementClickedId.id].x}px`;\n          }\n        } else if (elementClickedId.job) {\n          visitTitle.style.display = 'none';\n        }\n        drawTiles();\n      };\n\n      function checkClick(event, canvas_element) {\n        const canvasRect = canvas_element.getBoundingClientRect();\n        const clickX = event.clientX - canvasRect.left;\n        const clickY = event.clientY - canvasRect.top + window.scrollY;\n\n        // const clickX = event.layerX;\n        // const clickY = event.layerY - 135;\n\n        let element;\n\n        tiles_array.forEach((tile) => {\n\n          if (\n            clickX > tile.workWidth.start &&\n            clickX < tile.workWidth.end &&\n            clickY > tile.workHeight.start &&\n            clickY < tile.workHeight.end\n          ) {\n            element = {\n              id: tile.id,\n              nickname: tile.nickname,\n              hq: tile.level,\n              custom_name: tile.custom_name,\n              main: tile.main,\n              gang: tile.gang,\n              job: tile.job,\n            };\n          }\n        });\n        return element;\n      }\n\n      function createTiles(quantityX, quantityY) {\n        tiles_array = [];\n        const quantityAll = quantityX * quantityY;\n        const tileWidth = canvas_element.width / quantityX;\n        const tileHeight = canvas_element.height / quantityY;\n        console.log(tileWidth, tileHeight)\n        const drawPosition = {\n          x: 0,\n          y: 0,\n        };\n        for (let i = 1; i < quantityAll + 1; i++) {\n          let fillColor = \"\";\n          let nickname = '';\n          let level = '';\n          let custom_name = '';\n          let main = '';\n          let gang = {};\n          let job = '';\n          self.bases.forEach((element) => {\n            if (element.base === i && element.job != undefined && !element.nickname) {\n              fillColor = 'rgba(255, 206, 84, 0.5)';\n              nickname = element.nickname;\n              level = element.lvl;\n              custom_name = element.custom;\n              main = element.main;\n              job = element.job;\n            } else if (element.base === i && element.nickname === self.nickname) {\n              fillColor = 'green';\n              nickname = element.nickname;\n              gang = { role: element.role, gang: element.name, ticker: element.ticker };\n              level = element.lvl;\n              custom_name = element.custom;\n              main = element.main;\n            } else if (element.base === i && element.nickname !== self.nickname) {\n              fillColor = 'red';\n              nickname = element.nickname;\n              gang = { role: element.role, gang: element.name, ticker: element.ticker };\n              level = element.lvl;\n              custom_name = element.custom;\n              main = element.main;\n            }\n\n          });\n          const tile = new Tile(\n            drawPosition.x,\n            drawPosition.y,\n            tileWidth,\n            tileHeight,\n            i,\n            nickname,\n            level,\n            custom_name,\n            main,\n            gang,\n            job,\n            fillColor,\n          );\n\n          tiles_array.push(tile);\n\n          drawPosition.x += tileWidth;\n          if (drawPosition.x >= canvas_element.width) {\n            drawPosition.x = 0;\n            drawPosition.y += tileHeight;\n          }\n\n        }\n      }\n      const tiles = new Image();\n\n      const home = new Image();\n      const tree = new Image();\n      const buildingtop = new Image();\n      const buildingbottom = new Image();\n      const fountain = new Image();\n      const pool = new Image();\n      const heliport = new Image();\n      const job = new Image();\n      const select = new Image();\n      const enemy = new Image();\n      const lvl1 = new Image();\n      const lvl2 = new Image();\n      const lvl3 = new Image();\n      const lvl4 = new Image();\n      const lvl5 = new Image();\n      const lvl6 = new Image();\n      const lvl7 = new Image();\n      const lvl8 = new Image();\n      const lvl9 = new Image();\n      select.src = \"/img/map/select.png\"\n      enemy.src = \"/img/map/enemy.png\"\n      lvl1.src = \"/img/map/levels/1.png\"\n      lvl2.src = \"/img/map/levels/2.png\"\n      lvl3.src = \"/img/map/levels/3.png\"\n      lvl4.src = \"/img/map/levels/4.png\"\n      lvl5.src = \"/img/map/levels/5.png\"\n      lvl6.src = \"/img/map/levels/6.png\"\n      lvl7.src = \"/img/map/levels/7.png\"\n      lvl8.src = \"/img/map/levels/8.png\"\n      lvl9.src = \"/img/map/levels/9.png\"\n\n\n      tiles.src = '/img/map/buldingtiles.png';\n\n      home.src = '//img.drugwars.io/map/first.png';\n      buildingtop.src = '//img.drugwars.io/map/first.png';\n      pool.src = '//img.drugwars.io/map/first.png';\n      heliport.src = '//img.drugwars.io/map/first.png';\n      home.src = '//img.drugwars.io/map/home.png';\n      tree.src = '//img.drugwars.io/map/tree.png';\n      buildingtop.src = '//img.drugwars.io/map/buildingtop.png';\n      buildingbottom.src = '//img.drugwars.io/map/buildingbottom.png';\n      fountain.src = '//img.drugwars.io/map/fountain.png';\n      pool.src = '//img.drugwars.io/map/pool.png';\n      heliport.src = '//img.drugwars.io/map/heliport.png';\n      job.src = '//img.drugwars.io/map/home.png';\n\n\n      function drawTiles() {\n        const background = new Image();\n\n        background.src = `/img/mapbg.png`;\n        background.onload = () => {\n          context.imageSmoothingEnabled = true;\n          // we’re done with the rotating so restore the unrotated context\n          context.drawImage(background, 0, 0, canvas.width, canvas.height);\n          context.restore();\n\n          tiles_array.forEach((tile) => {\n\n\n            if (tile.fillColor) {\n              if (tile.level > 99) {\n                context.drawImage(lvl9, tile.x, tile.y, tile.width, tile.height);\n              }\n              else if (tile.level > 79) {\n                context.drawImage(lvl8, tile.x, tile.y, tile.width, tile.height);\n              }\n              else if (tile.level > 59) {\n                context.drawImage(lvl7, tile.x, tile.y, tile.width, tile.height);\n              }\n              else if (tile.level > 49) {\n                context.drawImage(lvl6, tile.x, tile.y, tile.width, tile.height);\n              }\n              else if (tile.level > 39) {\n                context.drawImage(lvl5, tile.x, tile.y, tile.width, tile.height);\n              }\n              else if (tile.level > 29) {\n                context.drawImage(lvl4, tile.x, tile.y, tile.width, tile.height);\n              }\n              else if (tile.level > 19) {\n                context.drawImage(lvl3, tile.x, tile.y, tile.width, tile.height);\n              }\n              else if (tile.level > 9) {\n                context.drawImage(lvl2, tile.x, tile.y, tile.width, tile.height);\n              }\n              else if (tile.level > 0) {\n                context.drawImage(lvl1, tile.x, tile.y, tile.width, tile.height);\n              }\n              else {\n\n                context.drawImage(tiles, self.maprng[tile.id].x * 72, self.maprng[tile.id].y * 72, 72, 72, tile.x, tile.y, width / 10, width / 10);\n              }\n            }\n            else {\n\n              context.drawImage(tiles, self.maprng[tile.id].x * 72, self.maprng[tile.id].y * 72, 72, 72, tile.x, tile.y, width / 10, width / 10);\n            }\n\n            if (self.canvasWidth < 500) {\n              context.beginPath();\n              if (tile.fillColor) {\n                context.strokeStyle = tile.fillColor\n                context.fillStyle = 'rgba(5, 0, 0, 0.0)';\n\n              }\n              else {\n                context.fillStyle = 'rgba(5, 0, 0, 0.0)';\n                //context.rect(tile.x + 7, tile.y + 12, tile.width - 3, tile.height - 5);\n                context.strokeStyle = 'rgba(5, 0, 0, 0.0)';\n              }\n              if (tile.fillColor === 'green') {\n                //context.roundRect(tile.x + 4, tile.y + 4, tile.width - 8, tile.height - 8, [5, 5]);\n\n                context.drawImage(select, tile.x, tile.y, tile.width - 8, tile.height);\n              }\n              else if (tile.fillColor === 'red') {\n                //context.roundRect(tile.x + 4, tile.y + 4, tile.width - 8, tile.height - 8, [5, 5]);\n                context.strokeStyle = 'red';\n                context.drawImage(enemy, tile.x - 2, tile.y - 2, tile.width + 4, tile.height + 4);\n              }\n              else context.roundRect(tile.x + 6, tile.y + 6, tile.width - 20, tile.height - 20, [5, 5]);\n              context.lineWidth = 3;\n\n\n              context.stroke();\n              // context.strokeStyle = '#000';\n\n              context.fill();\n              context.textAlign = 'center';\n              context.font = \"10px Arial\";\n              context.fillStyle = '#fff';\n              context.strokeStyle = 'black';\n              context.strokeText(tile.id, tile.x + 20, tile.y + 25);\n              context.fillText(tile.id, tile.x + 20, tile.y + 25, tile.width);\n\n            }\n            else {\n              context.beginPath();\n              if (tile.fillColor) {\n                context.strokeStyle = tile.fillColor\n                context.fillStyle = 'rgba(5, 0, 0, 0.0)';\n\n              }\n              else {\n                context.fillStyle = 'rgba(5, 0, 0, 0.0)';\n                //context.rect(tile.x + 7, tile.y + 12, tile.width - 3, tile.height - 5);\n                context.strokeStyle = 'rgba(5, 0, 0, 0.0)';\n              }\n              if (tile.fillColor === 'green') {\n                //context.roundRect(tile.x + 4, tile.y + 4, tile.width - 8, tile.height - 8, [5, 5]);\n\n                context.drawImage(select, tile.x, tile.y, tile.width, tile.height);\n              }\n              else if (tile.fillColor === 'red') {\n                //context.roundRect(tile.x + 4, tile.y + 4, tile.width - 8, tile.height - 8, [5, 5]);\n                context.strokeStyle = 'red';\n                context.drawImage(enemy, tile.x - 2, tile.y - 2, tile.width + 4, tile.height + 4);\n              }\n              else context.roundRect(tile.x + 8, tile.y + 8, tile.width - 16, tile.height - 15, [5, 5]);\n              context.lineWidth = 3;\n\n\n              context.stroke();\n              // context.strokeStyle = '#000';\n\n              context.fill();\n              context.textAlign = 'center';\n              context.font = \"10px Arial\";\n              context.fillStyle = '#fff';\n              context.strokeStyle = 'black';\n              context.strokeText(tile.id, tile.x + 25, tile.y + 38);\n              context.fillText(tile.id, tile.x + 25, tile.y + 38, tile.width);\n\n            }\n\n          });\n        };\n      }\n      createTiles(10, 10);\n      drawTiles();\n\n      // const limit = (document.body.clientWidth)-bg.offsetWidth;\n      // tb.style.left = (limit+50) +'px';\n    },\n    ...mapActions(['send', 'notify', 'setMainBase']),\n    async handleSubmit() {\n      const self = this;\n      const isValid = await this.validateFormFree();\n      this.isLoading = true;\n      if (isValid && this.location && this.selectedTile) {\n        const payload = {\n          type: 'dw-firstloc',\n          territory: Number(this.location),\n          base: Number(this.selectedTile),\n        };\n        this.send(payload)\n          .then(() => {\n            Promise.delay(2000).then(() => {\n              client.requestAsync('get_bases', this.location).then((result) => {\n                [self.bases] = result;\n                this.setMainBase({\n                  territory: result[0][0].territory,\n                  base: result[0][0].base,\n                  custom: result[0][0].custom,\n                  main: result[0][0].main,\n                });\n                self.$router.push(`/buildings`);\n                self.isLoading = false;\n              });\n            });\n          })\n          .catch((e) => {\n            this.notify({ type: 'error', message: 'Failed to take base' });\n            console.error('Failed to take base', e);\n            this.isLoading = false;\n          });\n      } else {\n        this.isLoading = false;\n      }\n    },\n    async validateFormFree() {\n      this.errorMessage = null;\n      const base = this.selectedTile;\n      const territory = this.location;\n      const params = { base, territory };\n      if (this.$store.state.game.user.buildings.find((b) => b.main === 1 && b.territory !== 0)) {\n        this.errorMessage = 'You already have a main base!';\n      }\n\n      if (!base || !territory) {\n        this.errorMessage = 'Please choose a location and a base';\n      }\n      const now = new Date();\n      const isPunished = new Date(Date.parse(this.$store.state.game.user.user.punished));\n      if (isPunished > now) {\n        this.errorMessage = `Hmm Bad talks are not appropriated in GoldWars, try again after ${isPunished.toLocaleString()}`;\n      }\n\n      if (!this.errorMessage)\n        try {\n          const base = await client.requestAsync('check_base', params);\n          if (base) {\n            this.errorMessage = `Base number '${base}' is already taken`;\n          }\n          return !this.errorMessage;\n        } catch (e) {\n          this.errorMessage = `Base number '${base}' doesn't exist`;\n          console.error(`Base number '${base}' doesn't exist`, e);\n          return false;\n        }\n      if (this.errorMessage) {\n        return false;\n      }\n      return !this.errorMessage;\n    },\n    selectBase() {\n      const territory = this.location;\n      const base = this.selectedTile;\n      const custom = this.customName;\n      const main = this.isMain;\n      this.setMainBase({ territory, base, custom, main });\n    },\n\n    updateLocation(value) {\n      const self = this;\n      self.bases = null;\n      self.selectedTile = null;\n\n      if (self.currentLocation !== self.location) {\n        if (value)\n          self.currentLocation = value;\n        else self.currentLocation = self.location;\n        const a = 1664525;\n        const c = 1013904223;\n        const m = 4294967296;\n        function lcg(seed) {\n          return function () {\n            seed = (a * seed + c) % m;\n            return seed / m;\n          };\n        }\n        const random = lcg(self.currentLocation)\n        const numbers = [];\n        for (let i = 0; i < 103; i++) {\n          numbers.push({ x: Math.floor(random() * 10), y: Math.floor(random() * 10) });\n        }\n        self.maprng = numbers;\n        this.$router.push({ path: `/map/territory?location=${Number(self.currentLocation)}` });\n\n        client.requestAsync('get_bases', self.currentLocation).then((result) => {\n          [self.bases] = result;\n          result[1].forEach((element) => {\n            self.bases.push(element);\n          });\n          self.start();\n          self.isLoading = false;\n        });\n      }\n    },\n  },\n  mounted() {\n    const self = this;\n    self.bases = null;\n    self.currentLocation = self.location;\n    client.requestAsync('get_bases', this.location).then((result) => {\n      [self.bases] = result;\n      result[1].forEach((element) => {\n        self.bases.push(element);\n      });\n      const a = 1664525;\n      const c = 1013904223;\n      const m = 4294967296;\n      function lcg(seed) {\n        return function () {\n          seed = (a * seed + c) % m;\n          return seed / m;\n        };\n      }\n      const random = lcg(self.currentLocation)\n      const numbers = [];\n      for (let i = 0; i < 103; i++) {\n        numbers.push({ x: Math.floor(random() * 10), y: Math.floor(random() * 10) });\n      }\n      self.maprng = numbers;\n      self.start();\n      self.isLoading = false;\n    });\n  },\n  // updated() {\n  //   const self = this;\n  //   self.bases = null;\n  //   if (self.currentLocation !== self.location) {\n  //     self.currentLocation = self.location;\n  //     client.requestAsync('get_bases', this.location).then((result) => {\n  //       [self.bases] = result;\n  //       result[1].forEach((element) => {\n  //         self.bases.push(element);\n  //       });\n  //       self.start();\n  //       self.isLoading = false;\n  //     });\n  //   }\n  // },\n};\n</script>\n\n\n<style lang=\"less\" scoped>\n.territorybg {\n  overflow: hidden;\n}\n\n.overlay {\n  position: absolute;\n  //background-image: url(/img/map.png);\n  top: 0px;\n  width: 100%;\n  height: 100%;\n  background-size: 100%;\n  pointer-events: none;\n}\n\n.title {\n  position: absolute;\n  z-index: 10;\n  left: 50%;\n  top: 20%;\n  text-shadow: 5px 5px 5px black; // pointer-events: none;\n  background: rgba(0, 0, 0, 0.8);\n  padding: 20px;\n  border-radius: 5px;\n}\n\n// .map-title {\n//   position: absolute;\n// }\n//table{\n//}\ntr {\n  height: 0px;\n  width: 0px;\n  display: block;\n}\n\ntd {\n  height: 0px;\n  width: 0px;\n  display: block;\n  padding: 0px;\n}\n\n.tile {\n  transform: translate3d(0em, 0em, 0em);\n  width: 4em;\n  height: 4em;\n  transition: all 1s cubic-bezier(0.22, 0.6, 0.39, 1.42);\n}\n\n.tile.hide {\n  transform: translate3d(12em, 12em, 0em) !important;\n  opacity: 0;\n  transition: all 1s cubic-bezier(0.7, -0.4, 0.88, 0.51);\n}\n\n\n\n@keyframes showTile {\n  from {\n    transform: translate3d(12em, 12em, 0em);\n    opacity: 0;\n  }\n\n  to {\n    transform: translate3d(0em, 0em, 0em);\n    opacity: 1;\n  }\n}\n\n@keyframes hideTile {\n  from {\n    transform: translate3d(0em, 0em, 0em);\n    opacity: 1;\n  }\n\n  to {\n    transform: translate3d(12em, 12em, 0em);\n    opacity: 0;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Territory.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Territory.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Territory.vue?vue&type=template&id=eddc2c26&scoped=true&\"\nimport script from \"./Territory.vue?vue&type=script&lang=js&\"\nexport * from \"./Territory.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Territory.vue?vue&type=style&index=0&id=eddc2c26&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"eddc2c26\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Territory.vue?vue&type=style&index=0&id=eddc2c26&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Territory.vue?vue&type=style&index=0&id=eddc2c26&lang=less&scoped=true&\""],"sourceRoot":""}