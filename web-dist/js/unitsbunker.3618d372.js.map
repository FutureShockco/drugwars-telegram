{"version":3,"sources":["webpack:///./src/views/Bootcamp/Bunker.vue?6d0e","webpack:///src/views/Bootcamp/Bunker.vue","webpack:///./src/views/Bootcamp/Bunker.vue?1d2d","webpack:///./src/views/Bootcamp/Bunker.vue","webpack:///./src/views/Bootcamp/Bunker.vue?66fb"],"names":["render","_vm","this","_h","$createElement","_c","_self","ownBase","bunker","lvl","staticClass","_v","ownUnits","length","defenders","attrs","_s","_f","defendercost","drugs","weapons","alcohol","defenderOffensivePower","defendersupply","maxSupply","isLoading","on","$event","handleRelease","showUnits","_l","ownUnit","key","territory","base","amount","addUnit","_e","autoFill","selectedUnits","cost","offensivePower","supply","removeUnits","tooMuchSupply","handleSave","errorMessage","rnd","staticRenderFns","data","$route","query","message","username","$store","state","auth","baseName","favoriteCombinations","JSON","parse","localStorage","getItem","combination_name","units","bases","active","components","draggable","created","loadDefenders","watch","storeUnits","forEach","computed","game","mainbase","allbase","user","buildings","nickname","setTimeout","self","defensivePower","power","Math","round","coordination","max_supply","methods","client","result","json","element","fillunits","push","splice","resetForm","target","target_type","chooseBase","location","farm_name","payload","from_territory","Number","from_base","type","missions","selectedUnitsObj","unit","serialize","obj","hasOwnProperty","p","str","join","onEnd","setItem","saveCombination","favs","combi","name","set","myarmy","loadCombination","combination","combinationtoload","deleteCombination","i","component"],"mappings":"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","file":"js/unitsbunker.3618d372.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.ownBase)?_c('div',[_c('BootcampTabs'),(_vm.ownBase && !_vm.bunker || !_vm.bunker.lvl)?_c('div',{staticClass:\"p-4 container-lg clearfix anim-fade-in text-center\"},[_c('h2',[_vm._v(\" You must build a bunker first.\")])]):_c('div',{staticClass:\"p-4 container-lg clearfix anim-fade-in text-center\"},[(_vm.ownUnits.length > 0 && !_vm.defenders || _vm.defenders.length < 1)?_c('div',{staticClass:\"p-2 text-center\"},[_vm._v(\"Your bunker is\\n        empty.\\n      \")]):_c('div',{staticClass:\"mt-4 mb-2\"},[_c('h3',[_vm._v(\"Units in the bunker\")]),_c('ArmyToSend',{attrs:{\"units\":_vm.defenders,\"disableicon\":true}}),_c('h5',{staticClass:\"mt-0\"},[_vm._v(\"Army Value\")]),_c('h5',{staticClass:\"mt-0\"},[_vm._v(\"Drugs: \"+_vm._s(_vm._f(\"amount\")(_vm.defendercost.drugs))+\" - Weapons: \"+_vm._s(_vm._f(\"amount\")(_vm.defendercost.weapons))+\" -\\n          Alcohol:\\n          \"+_vm._s(_vm._f(\"amount\")(_vm.defendercost.alcohol)))]),_c('h5',{staticClass:\"mt-0\"},[_vm._v(\"Power: \"+_vm._s(_vm.defenderOffensivePower)+\"%\")]),_c('h5',{staticClass:\"mt-0\"},[_vm._v(\"Supply: \"+_vm._s(_vm._f(\"amount\")(_vm.defendersupply))+\" / \"+_vm._s(_vm._f(\"amount\")(_vm.maxSupply)))]),_c('UiButton',{staticClass:\"button button-large button-red mb-5 \",attrs:{\"disabled\":!_vm.defenders || _vm.isLoading},on:{\"click\":function($event){_vm.handleRelease()}}},[(_vm.isLoading)?_c('SmallLoading'):_c('span',[_vm._v(\"Release units\")])],1)],1),(_vm.ownUnits.length > 0)?_c('div',{staticClass:\"column col-12 flex-md-items-start mt-0\"},[_c('h3',{staticClass:\"mb-0 mt-0\"},[_vm._v(\"Select units to hide\")]),(_vm.showUnits && _vm.ownUnits && _vm.ownUnits.length > 0)?_c('div',_vm._l((_vm.ownUnits),function(ownUnit){return _c('div',{key:ownUnit.key + _vm.ownBase.territory + _vm.ownBase.base},[(ownUnit.amount > 0)?_c('UnitSelect',{attrs:{\"item\":ownUnit},on:{\"click\":_vm.addUnit}}):_vm._e()],1)})):_c('div',[_vm._v(\"You must buy troops\")])]):_vm._e(),(_vm.ownUnits.length > 0)?_c('UiButton',{staticClass:\"button button-green mt-2 mb-2\",attrs:{\"disabled\":_vm.ownUnits.length === 0},on:{\"click\":function($event){_vm.autoFill()}}},[_vm._v(\"AutoFill\")]):_vm._e(),(_vm.ownUnits.length > 0)?_c('div',{staticClass:\"column col-12\"},[_c('div',{staticClass:\"mb-2\"},[_c('h3',{staticClass:\"mb-2\"},[_vm._v(\"Your selected army\")]),_c('ArmyToSend',{attrs:{\"units\":_vm.selectedUnits}})],1),_c('div',{staticClass:\"mb-0 form width-full\"},[(_vm.selectedUnits.length === 0)?_c('div',[_c('p',[_vm._v(\"You need to select at least 1 unit to defend this base.\")])]):_c('div',[_c('h5',{staticClass:\"mt-0\"},[_vm._v(\"Defenders Value\")]),_c('h5',{staticClass:\"mt-0\"},[_vm._v(\"Drugs: \"+_vm._s(_vm._f(\"amount\")(_vm.cost.drugs))+\" - Weapons: \"+_vm._s(_vm._f(\"amount\")(_vm.cost.weapons))+\" - Alcohol:\\n              \"+_vm._s(_vm._f(\"amount\")(_vm.cost.alcohol)))]),_c('h5',{staticClass:\"mt-0\"},[_vm._v(\"Power: \"+_vm._s(_vm.offensivePower)+\"%\")]),_c('h5',{staticClass:\"mt-0\"},[_vm._v(\"Supply: \"+_vm._s(_vm._f(\"amount\")(_vm.supply))+\" / \"+_vm._s(_vm._f(\"amount\")(_vm.maxSupply)))]),_c('UiButton',{staticClass:\"button button-blue mb-2\",on:{\"click\":function($event){_vm.removeUnits()}}},[_vm._v(\"Remove all\")])],1)]),(_vm.defenders && _vm.defenders.length > 0)?_c('div',{staticClass:\"mb-3\"},[_vm._v(\"Please release your units before adding new units.\\n        \")]):_vm._e(),_c('UiButton',{staticClass:\"button button-large button-red mb-5 \",attrs:{\"disabled\":_vm.defenders.length > 0 || _vm.tooMuchSupply || _vm.selectedUnits.length === 0 || _vm.isLoading},on:{\"click\":function($event){_vm.handleSave()}}},[(_vm.isLoading)?_c('SmallLoading'):_c('span',[_vm._v(\"Save\")])],1),(_vm.errorMessage)?_c('p',{staticClass:\"text-red text-left\"},[_vm._v(_vm._s(_vm.errorMessage))]):_vm._e()],1):_c('h2',{staticClass:\"text-center\"},[_vm._v(\"\\n        You don't have any unit.\\n        \"),_c('div',[_c('router-link',{staticClass:\"text-yellow\",attrs:{\"to\":\"/units\"}},[_vm._v(\"Click here to start to recruit\")])],1)])],1)],1):_c('div',{staticClass:\"card card-style anim-fade-in\"},[_c('div',{staticClass:\"content\"},[_c('h4',{staticClass:\"text-center\"},[_vm._v(\"\\n        You must choose a location on the map first.\\n        \"),_c('h2',[_c('router-link',{staticClass:\"text-yellow\",attrs:{\"to\":'/map/territory?location=' + _vm.rnd}},[_vm._v(\"Click here to choose a\\n            location.\")])],1)])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div v-if=\"ownBase\">\n      <BootcampTabs />\n      <div v-if=\"ownBase && !bunker || !bunker.lvl\" class=\"p-4 container-lg clearfix anim-fade-in text-center\">\n        <h2> You must build a bunker first.</h2>\n      </div>\n      <div v-else class=\"p-4 container-lg clearfix anim-fade-in text-center\">\n        <div v-if=\"ownUnits.length > 0 && !defenders || defenders.length < 1\" class=\"p-2 text-center\">Your bunker is\n          empty.\n        </div>\n        <div v-else class=\"mt-4 mb-2\">\n          <h3>Units in the bunker</h3>\n          <ArmyToSend :units=\"defenders\" :disableicon=\"true\" />\n          <h5 class=\"mt-0\">Army Value</h5>\n          <h5 class=\"mt-0\">Drugs: {{ defendercost.drugs | amount }} - Weapons: {{ defendercost.weapons | amount }} -\n            Alcohol:\n            {{ defendercost.alcohol | amount }}</h5>\n          <h5 class=\"mt-0\">Power: {{ defenderOffensivePower }}%</h5>\n          <h5 class=\"mt-0\">Supply: {{ defendersupply | amount }} / {{ maxSupply | amount }}</h5>\n          <UiButton :disabled=\"!defenders || isLoading\" class=\"button button-large button-red mb-5 \"\n            @click=\"handleRelease()\">\n            <SmallLoading v-if=\"isLoading\" />\n            <span v-else>Release units</span>\n          </UiButton>\n        </div>\n        <div v-if=\"ownUnits.length > 0\" class=\"column col-12 flex-md-items-start mt-0\">\n          <h3 class=\"mb-0 mt-0\">Select units to hide</h3>\n          <div v-if=\"showUnits && ownUnits && ownUnits.length > 0\">\n            <div v-for=\"ownUnit in ownUnits\" :key=\"ownUnit.key + ownBase.territory + ownBase.base\">\n              <UnitSelect v-if=\"ownUnit.amount > 0\" :item=\"ownUnit\" @click=\"addUnit\" />\n            </div>\n          </div>\n          <div v-else>You must buy troops</div>\n        </div>\n        <UiButton v-if=\"ownUnits.length > 0\" class=\"button button-green mt-2 mb-2\" :disabled=\"ownUnits.length === 0\"\n          @click=\"autoFill()\">AutoFill</UiButton>\n\n        <div v-if=\"ownUnits.length > 0\" class=\"column col-12\">\n          <div class=\"mb-2\">\n            <h3 class=\"mb-2\">Your selected army</h3>\n            <ArmyToSend :units=\"selectedUnits\" />\n          </div>\n          <div class=\"mb-0 form width-full\">\n            <div v-if=\"selectedUnits.length === 0\">\n              <p>You need to select at least 1 unit to defend this base.</p>\n            </div>\n            <div v-else>\n              <h5 class=\"mt-0\">Defenders Value</h5>\n              <h5 class=\"mt-0\">Drugs: {{ cost.drugs | amount }} - Weapons: {{ cost.weapons | amount }} - Alcohol:\n                {{ cost.alcohol | amount }}</h5>\n              <h5 class=\"mt-0\">Power: {{ offensivePower }}%</h5>\n              <h5 class=\"mt-0\">Supply: {{ supply | amount }} / {{ maxSupply | amount }}</h5>\n              <UiButton class=\"button button-blue mb-2\" @click=\"removeUnits()\">Remove all</UiButton>\n            </div>\n          </div>\n          <div v-if=\"defenders && defenders.length > 0\" class=\"mb-3\">Please release your units before adding new units.\n          </div>\n          <UiButton :disabled=\"defenders.length > 0 || tooMuchSupply || selectedUnits.length === 0 || isLoading\"\n            class=\"button button-large button-red mb-5 \" @click=\"handleSave()\">\n            <SmallLoading v-if=\"isLoading\" />\n            <span v-else>Save</span>\n          </UiButton>\n\n          <p class=\"text-red text-left\" v-if=\"errorMessage\">{{ errorMessage }}</p>\n        </div>\n        <h2 class=\"text-center\" v-else>\n          You don't have any unit.\n          <div>\n            <router-link :to=\"`/units`\" class=\"text-yellow\">Click here to start to recruit</router-link>\n          </div>\n        </h2>\n      </div>\n    </div>\n    <div v-else class=\"card card-style anim-fade-in\">\n      <div class=\"content\">\n        <h4 class=\"text-center\">\n          You must choose a location on the map first.\n          <h2>\n            <router-link :to=\"'/map/territory?location=' + rnd\" class=\"text-yellow\">Click here to choose a\n              location.</router-link>\n          </h2>\n        </h4>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex';\nimport client from '@/helpers/client';\nimport { units } from 'drugwars';\nimport Promise from 'bluebird';\nimport draggable from 'vuedraggable';\n\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      base: this.$route.query.base || null,\n      selectedUnits: [],\n      message: null,\n      username: this.$store.state.auth.username,\n      errorMessage: null,\n      baseName: null,\n      favoriteCombinations: JSON.parse(localStorage.getItem('fav_combi_def')) || null,\n      combination_name: null,\n      units: [],\n      bases: [],\n      defenders: [],\n      active: false,\n      showUnits: true,\n    };\n  },\n  components: {\n    draggable,\n  },\n  created() {\n    this.isLoading = true;\n    this.loadDefenders();\n  },\n  watch: {\n    ownBase() {\n      this.loadDefenders();\n    },\n    ownUnits() {\n      const units = [];\n      this.storeUnits.forEach(element => {\n        if (\n          element.territory === this.ownBase.territory &&\n          element.base === this.ownBase.base &&\n          element.amount > 0\n        )\n          units.push({\n            key: element.unit,\n            amount: element.amount,\n          });\n      });\n      return units;\n    },\n  },\n  computed: {\n    ownBase() {\n      return this.$store.state.game.mainbase;\n    },\n    allbase() {\n      return this.$store.state.game.user.buildings || null;\n    },\n    nickname() {\n      return this.$store.state.game.user.user.nickname;\n    },\n    user() {\n      return this.$store.state.game.user.user;\n    },\n    ownUnits() {\n      const units = [];\n      const self = this;\n      this.showUnits = false;\n      this.storeUnits.forEach(element => {\n        if (\n          element.territory === this.ownBase.territory &&\n          element.base === this.ownBase.base &&\n          element.amount > 0\n        )\n          units.push({\n            key: element.unit,\n            amount: element.amount,\n          });\n      });\n      setTimeout(() => {\n        self.showUnits = true;\n      }, 100);\n      return units;\n    },\n    storeUnits() {\n      return this.$store.state.game.user.units;\n    },\n    defendersupply() {\n      let supply = 0;\n      if (this.defenders.length > 0)\n        this.defenders.forEach(unit => {\n          supply += units[unit.key].supply * unit.amount;\n        });\n      return supply;\n    },\n    supply() {\n      let supply = 0;\n      this.selectedUnits.forEach(unit => {\n        supply += units[unit.key].supply * unit.amount;\n      });\n      return supply;\n    },\n    defensivePower() {\n      let supply = 0;\n      let power = 0;\n      this.$store.state.game.user.units.forEach(unit => {\n        supply += units[unit.unit].supply;\n      });\n      power = Math.round(100 - parseFloat(supply / 5).toFixed(0) / 100);\n      const coordination = this.$store.state.game.user.trainings.find(\n        b => b.key === 'coordination' || b.training === 'coordination',\n      );\n      if (coordination) power += parseInt(coordination.lvl) / 10;\n      if (power >= 100) return 100;\n      if (power >= 65) return power;\n      return 65;\n    },\n    offensivePower() {\n      let supply = 0;\n      let power = 0;\n      this.selectedUnits.forEach(unit => {\n        supply += units[unit.key].supply * unit.amount;\n      });\n      power = Math.round(100 - parseFloat(supply / 6).toFixed(0) / 100);\n      const coordination = this.$store.state.game.user.trainings.find(\n        b => b.key === 'coordination' || b.training === 'coordination',\n      );\n      if (coordination) power += parseInt(coordination.lvl) / 10;\n      if (power >= 100) return 100;\n      if (power >= 60) return power;\n      return 60;\n    },\n    defenderOffensivePower() {\n      let supply = 0;\n      let power = 0;\n      this.defenders.forEach(unit => {\n        supply += units[unit.key].supply * unit.amount;\n      });\n      power = Math.round(100 - parseFloat(supply / 6).toFixed(0) / 100);\n      const coordination = this.$store.state.game.user.trainings.find(\n        b => b.key === 'coordination' || b.training === 'coordination',\n      );\n      if (coordination) power += parseInt(coordination.lvl) / 10;\n      if (power >= 100) return 100;\n      if (power >= 65) return power;\n      return 65;\n    },\n    cost() {\n      const self = this;\n      const cost = { drugs: 0, weapons: 0, alcohol: 0 };\n      this.selectedUnits.forEach(unit => {\n        cost.drugs += units[unit.key].drugs_cost * unit.amount;\n        cost.weapons += units[unit.key].weapons_cost * unit.amount;\n        cost.alcohol += units[unit.key].alcohols_cost * unit.amount;\n      });\n      return cost;\n    },\n    defendercost() {\n      const self = this;\n      const cost = { drugs: 0, weapons: 0, alcohol: 0 };\n      if (this.defenders && this.defenders.length > 0)\n        this.defenders.forEach(unit => {\n          cost.drugs += units[unit.key].drugs_cost * unit.amount;\n          cost.weapons += units[unit.key].weapons_cost * unit.amount;\n          cost.alcohol += units[unit.key].alcohols_cost * unit.amount;\n        });\n      return cost;\n    },\n    maxSupply() {\n      const max_supply = this.bunker.lvl * 2000;\n      return max_supply;\n    },\n    tooMuchSupply() {\n      return this.supply > this.maxSupply;\n    },\n    bunker() {\n      return (\n        this.$store.state.game.user.buildings.find(\n          b =>\n            b.building === 'bunker' &&\n            b.base === this.$store.state.game.mainbase.base &&\n            b.territory === this.$store.state.game.mainbase.territory,\n        ) || {\n          lvl: 0,\n        }\n      );\n    },\n  },\n  methods: {\n    ...mapActions(['missions', 'init', 'get_bases', 'setBase']),\n    loadDefenders() {\n      this.defenders = [];\n      const params = { base: this.ownBase.base, territory: this.ownBase.territory };\n      client.requestAsync('get_defenders', params).then(result => {\n        if (result && result[0] && result[0].json) {\n          this.defenders = JSON.parse(result[0].json).units;\n        }\n        this.isLoading = false;\n      });\n    },\n    autoFill() {\n      const fillunits = [];\n      this.ownUnits.forEach(element => {\n        if (element.key !== 'spy' && element.key !== 'occupation_troop' && element.key !== 'hobo') {\n          fillunits.push(element);\n        }\n      });\n      fillunits.forEach(element => {\n        if (\n          !this.selectedUnits.find(u => u.key === element.key) &&\n          this.supply < (this.maxSupply / 100) * 85\n        ) {\n          let amount = Math.floor(this.maxSupply / fillunits.length / units[element.key].supply);\n          if (amount > element.amount) {\n            amount = element.amount;\n          }\n          this.selectedUnits.push({\n            key: element.key,\n            amount,\n          });\n          fillunits.splice(0, 1);\n        }\n      });\n      this.autoFill();\n    },\n    resetForm() {\n      this.target = null;\n      this.base = null;\n      this.selectedUnits = [];\n      this.message = null;\n      this.target_type = null;\n    },\n    chooseBase(territory, location, custom) {\n      this.target = territory;\n      this.base = location;\n      this.farm_name = `${this.targetNickname} ${custom}`;\n    },\n    removeUnits() {\n      this.selectedUnits = [];\n    },\n    handleSave() {\n      this.isLoading = true;\n      const self = this;\n      let payload = {};\n      payload = {\n        from_territory: Number(self.ownBase.territory),\n        from_base: Number(self.ownBase.base),\n        units: this.selectedUnits,\n        type: 'save-defense',\n      };\n      this.missions(payload)\n        .then(() => {\n          Promise.delay(3000).then(() => {\n            self.loadDefenders();\n            self.init();\n            this.isLoading = false;\n          });\n        })\n        .catch(e => {\n          console.error('Failed to start a fight=', e);\n          this.isLoading = false;\n        });\n    },\n    handleRelease() {\n      this.isLoading = true;\n      const self = this;\n\n      let payload = {};\n      payload = {\n        from_territory: Number(self.ownBase.territory),\n        from_base: Number(self.ownBase.base),\n        type: 'release-defense',\n      };\n      this.missions(payload)\n        .then(() => {\n          Promise.delay(3000).then(() => {\n            self.loadDefenders();\n            self.init();\n            this.isLoading = false;\n          });\n        })\n        .catch(e => {\n          console.error('Failed to start a fight=', e);\n          this.isLoading = false;\n        });\n    },\n    async validateForm(type) {\n      this.errorMessage = null;\n      if (this.selectedUnits.length === 0) this.errorMessage = 'Please select some units';\n      if (this.errorMessage) {\n        return false;\n      }\n      return !this.errorMessage;\n    },\n    addUnit(payload) {\n      const amount = parseInt(payload.amount);\n      const selectedUnitsObj = {};\n      const ownUnit = this.ownUnits.find(unit => unit.key === payload.key);\n\n      this.selectedUnits.forEach(unit => {\n        selectedUnitsObj[unit.key] = unit.amount;\n      });\n      selectedUnitsObj[payload.key] = !selectedUnitsObj[payload.key]\n        ? amount\n        : amount + parseInt(selectedUnitsObj[payload.key]);\n      if (selectedUnitsObj[payload.key] > ownUnit.amount) {\n        selectedUnitsObj[payload.key] = parseInt(ownUnit.amount);\n      }\n      if (selectedUnitsObj[payload.key] < 0) {\n        selectedUnitsObj[payload.key] = 0;\n      }\n\n      this.selectedUnits = Object.keys(selectedUnitsObj).map(key => ({\n        key,\n        amount: selectedUnitsObj[key],\n      }));\n    },\n\n    serialize(obj) {\n      const str = [];\n      for (const p in obj)\n        if (obj.hasOwnProperty(p)) {\n          str.push(`${encodeURIComponent(p)}=${encodeURIComponent(obj[p])}`);\n        }\n      return str.join('&');\n    },\n    onEnd() {\n      localStorage.setItem('fav_combi_def', JSON.stringify(this.favoriteCombinations));\n    },\n    saveCombination() {\n      let favs = [];\n      if (localStorage.getItem('fav_combi_def')) {\n        favs = JSON.parse(localStorage.getItem('fav_combi_def'));\n      }\n      const myarmy = this.selectedUnits.map(unit => ({\n        key: unit.key,\n        amount: unit.amount,\n      }));\n\n      const combi = {};\n      combi.name = this.combination_name;\n      combi.set = myarmy;\n      favs.push(combi);\n      this.favoriteCombinations = favs;\n      this.combination_name = null;\n      localStorage.setItem('fav_combi_def', JSON.stringify(favs));\n    },\n    loadCombination(combination) {\n      const combinationtoload = [];\n      combination.forEach(unit => {\n        if (\n          this.ownUnits.find(lunit => lunit.key === unit.key) &&\n          unit.amount <= this.ownUnits.find(lunit => lunit.key === unit.key).amount\n        ) {\n          combinationtoload.push(unit);\n        } else {\n          if (this.ownUnits.find(lunit => lunit.key === unit.key))\n            unit.amount = this.ownUnits.find(lunit => lunit.key === unit.key).amount;\n          combinationtoload.push(unit);\n        }\n      });\n      this.selectedUnits = combinationtoload;\n    },\n    deleteCombination(combination) {\n      let favs = [];\n      if (localStorage.getItem('fav_combi_def')) {\n        favs = JSON.parse(localStorage.getItem('fav_combi_def'));\n      }\n      for (let i = 0; i < favs.length; i += 1) {\n        if (favs[i].name === combination) {\n          favs.splice(i, 1);\n          i -= 1;\n        }\n      }\n      localStorage.setItem('fav_combi_def', JSON.stringify(favs));\n      this.favoriteCombinations = favs;\n    },\n  },\n};\n</script>\n\n\n<style scoped lang=\"less\">\n.width-full {\n  max-width: 100%;\n}\n\n.vue-ui-modal {\n  background: rgba(0, 0, 0, 0.7);\n  overflow-y: scroll;\n}\n\n.farm {\n  background: rgba(0, 0, 0, 0.9);\n}\n\n@media screen and (min-width: 399px) and (max-width: 1119px) {\n  .column.b {\n    width: 100% !important;\n  }\n}\n\n.dropdown {\n  left: 50%;\n  transform: translatey(-30%) rotatex(90deg) scale(0);\n  margin-top: 0.55em;\n  transform-origin: 0 0;\n  border-radius: 0.35em;\n  display: none;\n  opacity: 0;\n  transition: all 200ms linear;\n\n  &.isOpen {\n    transform: translatey(0%);\n    display: block;\n    opacity: 1;\n  }\n}\n\n.rp {\n  padding: 5px;\n  background: black;\n  color: #ffc508;\n  z-index: 999999;\n  text-transform: uppercase;\n}\n\n.rp:hover {\n  background: #ffc508;\n  color: black;\n  font-weight: bold;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bunker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bunker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Bunker.vue?vue&type=template&id=25afc6eb&scoped=true&\"\nimport script from \"./Bunker.vue?vue&type=script&lang=js&\"\nexport * from \"./Bunker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Bunker.vue?vue&type=style&index=0&id=25afc6eb&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"25afc6eb\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bunker.vue?vue&type=style&index=0&id=25afc6eb&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bunker.vue?vue&type=style&index=0&id=25afc6eb&scoped=true&lang=less&\""],"sourceRoot":""}