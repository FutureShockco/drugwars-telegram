{"version":3,"sources":["webpack:///./src/views/Gangs/GangSettings.vue?6ccf","webpack:///src/views/Gangs/GangSettings.vue","webpack:///./src/views/Gangs/GangSettings.vue?fbb5","webpack:///./src/views/Gangs/GangSettings.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","gang","name","on","$event","preventDefault","handleSubmit","directives","rawName","value","expression","attrs","domProps","target","composing","image","website","about","isLoading","staticRenderFns","data","id","$route","params","isInit","user","$store","state","game","computed","isBoss","role","created","client","methods","settings","send","payload","component"],"mappings":"sHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,aAAaA,EAAG,MAAM,CAACE,YAAY,OAAO,CAAEN,EAAU,OAAEI,EAAG,WAAWA,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIS,KAAKC,MAAQV,EAAIS,KAAKA,SAASL,EAAG,OAAO,CAACE,YAAY,OAAOK,GAAG,CAAC,OAAS,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBb,EAAIc,aAAaF,MAAW,CAACR,EAAG,QAAQ,CAACW,WAAW,CAAC,CAACL,KAAK,QAAQM,QAAQ,UAAUC,MAAOjB,EAAQ,KAAEkB,WAAW,SAASZ,YAAY,mCAAmCa,MAAM,CAAC,YAAc,OAAO,UAAY,MAAMC,SAAS,CAAC,MAASpB,EAAQ,MAAGW,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOS,OAAOC,YAAqBtB,EAAIU,KAAKE,EAAOS,OAAOJ,WAAUb,EAAG,QAAQ,CAACW,WAAW,CAAC,CAACL,KAAK,QAAQM,QAAQ,UAAUC,MAAOjB,EAAS,MAAEkB,WAAW,UAAUZ,YAAY,mCAAmCa,MAAM,CAAC,YAAc,uBAAuB,KAAO,OAAOC,SAAS,CAAC,MAASpB,EAAS,OAAGW,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOS,OAAOC,YAAqBtB,EAAIuB,MAAMX,EAAOS,OAAOJ,WAAUb,EAAG,QAAQ,CAACW,WAAW,CAAC,CAACL,KAAK,QAAQM,QAAQ,UAAUC,MAAOjB,EAAW,QAAEkB,WAAW,YAAYZ,YAAY,mCAAmCa,MAAM,CAAC,YAAc,qBAAqB,KAAO,OAAOC,SAAS,CAAC,MAASpB,EAAW,SAAGW,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOS,OAAOC,YAAqBtB,EAAIwB,QAAQZ,EAAOS,OAAOJ,WAAUb,EAAG,WAAW,CAACW,WAAW,CAAC,CAACL,KAAK,QAAQM,QAAQ,UAAUC,MAAOjB,EAAS,MAAEkB,WAAW,UAAUZ,YAAY,mCAAmCa,MAAM,CAAC,KAAO,OAAO,YAAc,yBAAyB,UAAY,OAAOC,SAAS,CAAC,MAASpB,EAAS,OAAGW,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOS,OAAOC,YAAqBtB,EAAIyB,MAAMb,EAAOS,OAAOJ,WAAUb,EAAG,WAAW,CAACE,YAAY,qCAAqCa,MAAM,CAAC,KAAO,SAAS,SAAWnB,EAAI0B,YAAY,CAAG1B,EAAI0B,UAAuEtB,EAAG,gBAA/DA,EAAG,OAAO,CAACJ,EAAIO,GAAG,2CAA8D,IAAI,MAAM,IAAI,IAC34DoB,EAAkB,G,4DC2BtB,GACEC,KADF,WAEI,MAAO,CACLC,GAAI5B,KAAK6B,OAAOC,OAAOF,GACvBG,QAAQ,EACRN,WAAW,EACXjB,KAAM,KACNC,KAAM,KACNa,MAAO,KACPC,QAAS,KACTC,MAAO,KACPQ,KAAMhC,KAAKiC,OAAOC,MAAMC,KAAKH,KAAKA,OAGtCI,SAAU,CACRC,OADJ,WAEM,MAA0B,SAAnBrC,KAAKgC,KAAKM,MAAmBtC,KAAKgC,KAAKxB,OAASR,KAAK4B,KAGhEW,QAnBF,WAmBA,WACIvC,KAAK+B,QAAS,EACdS,EAAJ,6EACA,EADA,GACM,EAAN,KADA,KAEM,EAAN,eACM,EAAN,iBACM,EAAN,qBACM,EAAN,iBACM,EAAN,cAGEC,QAAS,OAAX,OAAW,CAAX,GACA,kCADA,CAEI5B,aAFJ,WAEA,WACMb,KAAKyB,WAAY,EAEjB,IAAN,KACUzB,KAAKS,OAAMiC,EAASjC,KAAOT,KAAKS,MAChCT,KAAKsB,QAAOoB,EAASpB,MAAQtB,KAAKsB,OAClCtB,KAAKuB,UAASmB,EAASnB,QAAUvB,KAAKuB,SACtCvB,KAAKwB,QAAOkB,EAASlB,MAAQxB,KAAKwB,OAEtC,IAAN,+CAEMxB,KAAK2C,KAAKC,GAChB,iBACQ,EAAR,aACQ,EAAR,QACU,KAAV,UACU,QAAV,qCAGA,mBACQ,QAAR,qCACQ,EAAR,oBCjFqV,I,YCOjVC,EAAY,OAAhB,OAAgB,CACd,EACA/C,EACA4B,GACA,EACA,KACA,KACA,MAIF,e","file":"js/gang-settings.d032f0d5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('GangsTabs'),_c('div',{staticClass:\"p-4\"},[(_vm.isInit)?_c('Loading'):_c('div',[_c('h1',[_vm._v(_vm._s(_vm.gang.name || _vm.gang.gang))]),_c('form',{staticClass:\"form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.handleSubmit($event)}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],staticClass:\"input input-block text-left mb-2\",attrs:{\"placeholder\":\"Name\",\"maxlength\":\"32\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.image),expression:\"image\"}],staticClass:\"input input-block text-left mb-2\",attrs:{\"placeholder\":\"Image URL (optional)\",\"type\":\"url\"},domProps:{\"value\":(_vm.image)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.image=$event.target.value}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.website),expression:\"website\"}],staticClass:\"input input-block text-left mb-2\",attrs:{\"placeholder\":\"Website (optional)\",\"type\":\"url\"},domProps:{\"value\":(_vm.website)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.website=$event.target.value}}}),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.about),expression:\"about\"}],staticClass:\"input input-block text-left mb-2\",attrs:{\"type\":\"text\",\"placeholder\":\"Description (optional)\",\"maxlength\":\"280\"},domProps:{\"value\":(_vm.about)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.about=$event.target.value}}}),_c('UiButton',{staticClass:\"button button-green btn-block mb-2\",attrs:{\"type\":\"submit\",\"disabled\":_vm.isLoading}},[(!_vm.isLoading)?_c('span',[_vm._v(\"\\n              Update\\n            \")]):_c('SmallLoading')],1)],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <GangsTabs />\n        <div class=\"p-4\">\n            <Loading v-if=\"isInit\" />\n            <div v-else>\n                <h1>{{ gang.name || gang.gang }}</h1>\n                <form class=\"form\" @submit.prevent=\"handleSubmit\">\n                    <input class=\"input input-block text-left mb-2\" placeholder=\"Name\" v-model=\"name\" maxlength=\"32\" />\n                    <input class=\"input input-block text-left mb-2\" placeholder=\"Image URL (optional)\" v-model=\"image\" type=\"url\" />\n                    <input class=\"input input-block text-left mb-2\" placeholder=\"Website (optional)\" v-model=\"website\" type=\"url\" />\n                    <textarea type=\"text\" class=\"input input-block text-left mb-2\" placeholder=\"Description (optional)\" v-model=\"about\" maxlength=\"280\"></textarea>\n                    <UiButton type=\"submit\" class=\"button button-green btn-block mb-2\" :disabled=\"isLoading\">\n                <span v-if=\"!isLoading\">\n                  Update\n                </span>\n                <SmallLoading v-else />\n              </UiButton>\n                </form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex';\nimport client from '@/helpers/client';\n\nexport default {\n  data() {\n    return {\n      id: this.$route.params.id,\n      isInit: false,\n      isLoading: false,\n      gang: null,\n      name: null,\n      image: null,\n      website: null,\n      about: null,\n      user: this.$store.state.game.user.user,\n    };\n  },\n  computed: {\n    isBoss() {\n      return this.user.role === 'boss' && this.user.gang === this.id;\n    },\n  },\n  created() {\n    this.isInit = true;\n    client.requestAsync('get_gang', this.id).then(result => {\n      [this.gang] = result;\n      this.name = result[0].name;\n      this.image = result[0].image;\n      this.website = result[0].website;\n      this.about = result[0].about;\n      this.isInit = false;\n    });\n  },\n  methods: {\n    ...mapActions(['send', 'notify']),\n    handleSubmit() {\n      this.isLoading = true;\n\n      const settings = {};\n      if (this.name) settings.name = this.name;\n      if (this.image) settings.image = this.image;\n      if (this.website) settings.website = this.website;\n      if (this.about) settings.about = this.about;\n\n      const payload = { gang: this.id, settings, type: 'gang-update' };\n\n      this.send(payload)\n        .then(() => {\n          this.isLoading = false;\n          this.notify({\n            type: 'success',\n            message: `Settings successfully updated`,\n          });\n        })\n        .catch(e => {\n          console.error('Failed to update settings', e);\n          this.isLoading = false;\n        });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GangSettings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GangSettings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GangSettings.vue?vue&type=template&id=ff547ea4&\"\nimport script from \"./GangSettings.vue?vue&type=script&lang=js&\"\nexport * from \"./GangSettings.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}