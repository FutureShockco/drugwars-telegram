(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["missions"],{"2ba4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.ownBase?a("div",[a("ActionsTabs"),t.farmOn?a("UiCenter",{staticClass:"vue-ui-modal pt-2 pb-7"},[a("div",{staticClass:"wrapper"},[t.farmlist?a("div",{staticClass:"columns"},t._l(t.farmlist,(function(e){return a("div",{key:e.key,staticClass:"column farm col-6"},[a("div",{staticClass:"border-bottom border-top border-left text-right"},[a("h5",{staticClass:"mb-0"},[t._v("\n                "+t._s(e.name)+"\n                "),a("span",{staticClass:"text-yellow mx-1"},[t._v(t._s(e.set.territory)+" : "+t._s(e.set.location))]),a("UiButton",{staticClass:"button button-red",on:{click:function(a){t.deleteFarm(e.name)}}},[a("div",{staticClass:"iconfont icon-trashcan text-white"})]),a("UiButton",{staticClass:"button button-green ml-3",on:{click:function(a){t.loadFarm(e.set)}}},[a("div",{staticClass:"iconfont icon-check text-white"})])],1)])])}))):a("h3",[t._v("You should first add a place to your list by visiting it.")]),a("UiButton",{staticClass:"button button-red mt-5",on:{click:function(e){t.openFarmList()}}},[t._v("Cancel")])],1)]):t._e(),a("div",{staticClass:"card mx-0 border-bottom-highlight mb-1 anim-fade-in"},[a("div",{staticClass:"content"},[t.ownUnits.length>0?a("div",[a("div",{staticClass:"mt-1"}),t.tutorialStep>6?a("div",[a("h3",[t._v("Select your army composition")]),t.ownUnits.length>0?a("div",{staticClass:"row d-flex"},t._l(t.ownUnits,(function(e){return e.amount>0?a("UnitSelect",{key:e.key+t.ownBase.territory+t.ownBase.base,staticClass:"col-3",attrs:{item:e},on:{select:t.addUnit}}):t._e()}))):a("div",[t._v("You must buy troops")])]):t._e()]):t._e(),t.ownUnits.length>0?a("div",{staticClass:"column col-12 col-sm-6"},[a("div",{staticClass:"mb-2"},[a("h3",{staticClass:"mb-2"},[t._v("Your selected army")]),a("ArmyToSend",{attrs:{units:t.selectedUnits}})],1),a("div",{staticClass:"mb-0 form width-full"},[0===t.selectedUnits.length?a("div",[a("p",[t._v("You need to select at least 1 unit.")])]):t.tutorialStep>7?a("div",[a("h5",[t._v("Power : "+t._s(t.offensivePower)+"% - Timer : "+t._s(t._f("ms")(t.timer))+" - Cost : "+t._s(t._f("amount")(t.cost)))]),a("UiButton",{staticClass:"btn btn-xxs gradient-red mb-2",on:{click:function(e){t.removeUnits()}}},[t._v("Remove all")]),"transport"===t.action_type?a("div",[a("div",{staticClass:"columns mt-4"},[a("div",{staticClass:"column col-4"},[a("ProgressBar",{attrs:{icon:"drug",color:"#00b31e",width:70,"font-size":"20",pv:t.progressPercent(t.drugs_amount,t.selectedTotal),total:t.drugs_amount,cost:t.carry-t.selectedTotal,bold:12,"text-bg-color":"#1f1f1f",during:3,"border-color":"#ffc508","bg-color":"#fbb034","text-color":"#ffffff"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.drugs_amount,expression:"drugs_amount"}],staticClass:"mt-5 input width-full",attrs:{type:"number",placeholder:"amount"},domProps:{value:t.drugs_amount},on:{input:function(e){e.target.composing||(t.drugs_amount=e.target.value)}}})],1),a("div",{staticClass:"column col-4"},[a("ProgressBar",{attrs:{icon:"weapon",color:"#00b31e",width:70,"font-size":"20",pv:t.progressPercent(t.weapons_amount,t.selectedTotal),total:t.weapons_amount,cost:t.carry-t.selectedTotal,bold:12,"text-bg-color":"#1f1f1f",during:3,"border-color":"#ffc508","bg-color":"#fbb034","text-color":"#ffffff"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.weapons_amount,expression:"weapons_amount"}],staticClass:"mt-5 input width-full",attrs:{type:"number",placeholder:"amount"},domProps:{value:t.weapons_amount},on:{input:function(e){e.target.composing||(t.weapons_amount=e.target.value)}}})],1),a("div",{staticClass:"column col-4"},[a("ProgressBar",{attrs:{icon:"alcohol",color:"#00b31e",width:70,"font-size":"20",pv:t.progressPercent(t.alcohol_amount,t.selectedTotal),total:t.alcohol_amount,cost:t.carry-t.selectedTotal,bold:12,"text-bg-color":"#1f1f1f",during:3,"border-color":"#ffc508","bg-color":"#fbb034","text-color":"#ffffff"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.alcohol_amount,expression:"alcohol_amount"}],staticClass:"mt-5 input width-full",attrs:{type:"number",placeholder:"amount"},domProps:{value:t.alcohol_amount},on:{input:function(e){e.target.composing||(t.alcohol_amount=e.target.value)}}})],1)]),a("h5",{class:{"text-red":t.progressPercent(t.selectedTotal,t.carry)>100}},[t._v("Total\n                  "+t._s(t.progressPercent(t.selectedTotal,t.carry))+"%")])]):t._e()],1):t._e()]),"occupy"!==t.action_type&&"npc"!==t.target_type?a("div",[a("h3",[t._v("Type a nickname")]),a("div",{staticClass:"d-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.targetNickname,expression:"targetNickname"}],staticClass:"input form-control mb-1",attrs:{readonly:"TommasoBuscetta"===t.targetNickname,type:"string",placeholder:"Nickname"},domProps:{value:t.targetNickname},on:{input:function(e){e.target.composing||(t.targetNickname=e.target.value)}}}),a("UiButton",{staticClass:"button button-green",on:{click:function(e){t.getUserBase()}}},[a("div",{staticClass:"fad fa-search"})])],1)]):t._e(),"transport"===t.action_type||"station"===t.action_type?a("h5",{staticClass:"text-yellow ddrop mt-0 mb-0",class:{active:t.active},on:{click:function(e){t.isOpen=!t.isOpen,t.active=!t.active}}},[t._v("\n            CHOOSE FROM YOUR BASES\n            "),a("svg",{attrs:{viewBox:"0 0 451.847 451.847",width:"12"}},[a("path",{attrs:{d:"M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751\n\t\tc12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0\n\t\tc12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z",fill:"#fff"}})])]):t._e(),"transport"===t.action_type||"station"===t.action_type?a("div",{staticClass:"dropdown",class:{isOpen:t.isOpen}},t._l(t.allbase,(function(e){return"headquarters"===e.building&&t.ownBase.territory+""+t.ownBase.base!==e.territory+""+e.base?a("UiButton",{key:e.territory+""+e.base,staticClass:"btn btn-yellow btn-sm rp mr-2",on:{click:function(a){t.setRallyPointCoordinates(e.territory,e.base)}}},[t._v("\n              "+t._s(e.custom))]):t._e()}))):t._e(),a("h3",{staticClass:"mt-1"},[t._v("Or your target coordinates")]),a("div",{staticClass:"d-flex"},[a("div",{staticClass:"col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.target,expression:"target"}],staticClass:"input form-control mb-4",attrs:{readonly:"TommasoBuscetta"===t.targetNickname,type:"number",placeholder:"Territory"},domProps:{value:t.target},on:{input:function(e){e.target.composing||(t.target=e.target.value)}}})]),a("div",{staticClass:"col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.base,expression:"base"}],staticClass:"input form-control mb-4",attrs:{readonly:"TommasoBuscetta"===t.targetNickname,type:"number",placeholder:"Base"},domProps:{value:t.base},on:{input:function(e){e.target.composing||(t.base=e.target.value)}}})])]),"npc"===t.target_type||"attack"!==t.action_type&&"transport"!==t.action_type?t._e():a("div",{class:7===t.tutorialStep?"d-none":""},[a("h3",[t._v("Add a fight message*")]),a("div",[t._v("* optional")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"input form-control btn-block mb-4",attrs:{placeholder:"I'm coming for you",maxlength:"280"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}})]),"occupy"===t.action_type?a("div",[a("h3",[t._v("Choose Base Name (max 10 bases)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.baseName,expression:"baseName"}],staticClass:"input form-control btn-block mb-2",attrs:{placeholder:"Eg : Saint Street",maxlength:"280"},domProps:{value:t.baseName},on:{input:function(e){e.target.composing||(t.baseName=e.target.value)}}})]):t._e(),a("div",{class:1===t.tutoDetail&&7===t.tutorialStep?"tutobox":""},["attack"===t.action_type?a("UiButton",{staticClass:"btn w-100 gradient-red font-700 text-uppercase",attrs:{disabled:0===t.selectedUnits.length||!t.target||t.isLoading},on:{click:t.handleSubmit}},[t.isLoading?a("SmallLoading"):a("span",[t._v(t._s(t.action_type))])],1):t._e()],1),"transport"===t.action_type?a("UiButton",{staticClass:"button button-large button-blue mb-2 d-block",attrs:{disabled:0===t.selectedUnits.length||!t.target||t.isLoading},on:{click:t.handleSubmit}},[t.isLoading?a("SmallLoading"):a("span",[t._v(t._s(t.action_type))])],1):t._e(),"occupy"===t.action_type?a("UiButton",{staticClass:"button button-large button-green mb-2 d-block",attrs:{disabled:0===t.selectedUnits.length||!t.target||t.isLoading},on:{click:t.handleSubmit}},[t.isLoading?a("SmallLoading"):a("span",[t._v(t._s(t.action_type))])],1):t._e(),"station"===t.action_type?a("UiButton",{staticClass:"button button-large button-orange mb-2 d-block",attrs:{disabled:0===t.selectedUnits.length||!t.target||t.isLoading},on:{click:t.handleSubmit}},[t.isLoading?a("SmallLoading"):a("span",[t._v(t._s(t.action_type))])],1):t._e(),t.errorMessage?a("div",{staticClass:"text-red text-left"},[t._v(t._s(t.errorMessage))]):t._e()],1):a("h4",{staticClass:"text-center"},[t._v("\n          You don't have any unit.\n          "),a("h2",[a("router-link",{staticClass:"text-yellow",attrs:{to:"/units"}},[t._v("Click here to start to recruit")])],1)])])]),t.popupOn?a("UiCenter",{staticClass:"vue-ui-modal pt-2 pb-7"},[a("div",{staticClass:"wrapper"},[a("div",[t._v("Choose a custom name to remember this opponent or his place.")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.farm_name,expression:"farm_name"}],staticClass:"mt-2 input",attrs:{type:"string",placeholder:"Snollygoster"},domProps:{value:t.farm_name},on:{input:function(e){e.target.composing||(t.farm_name=e.target.value)}}}),a("UiButton",{staticClass:"button button-red",on:{click:function(e){t.listPopup()}}},[t._v("Cancel")]),a("UiButton",{staticClass:"button button-green ml-1",on:{click:function(e){t.saveFarm()}}},[t._v("Save")])],1)]):t._e()],1):a("div",{staticClass:"card card-style anim-fade-in"},[a("div",{staticClass:"content"},[a("h4",{staticClass:"text-center"},[t._v("\n        You must choose a location on the map first.\n        "),a("h2",[a("router-link",{staticClass:"text-yellow",attrs:{to:"/map/territory?location="+t.rnd}},[t._v("Click here to choose a\n            location.")])],1)])])])},n=[],o=(a("7f7f"),a("a4bb")),r=a.n(o),i=(a("96cf"),a("3b8d")),c=a("f499"),u=a.n(c),l=a("cebc"),m=(a("c5f6"),a("59ad")),p=a.n(m),d=a("e814"),h=a.n(d),g=(a("7514"),a("ac6a"),a("2f62")),f=a("451e"),b=a("7edb"),v=a("f684"),y=a.n(v),_=a("310e"),k=a.n(_),w={data:function(){return{isLoading:!1,action_type:this.$route.query.type||"attack",target:this.$route.query.target||null,target_type:this.$route.query.target_type||null,base:this.$route.query.base||null,selectedUnits:[],message:this.$route.query.message||null,targetNickname:this.$route.query.nickname||null,username:this.$store.state.auth.username,errorMessage:null,baseName:null,farmOn:!1,favoriteCombinations:JSON.parse(localStorage.getItem("fav_combi"))||null,farmlist:JSON.parse(localStorage.getItem("farmlist"))||null,combination_name:null,units:[],bases:[],drugs_amount:0,weapons_amount:0,alcohol_amount:0,popupOn:!1,isOpen:!1,active:!1,privateAttack:!0,enemyProd:0,rnd:Math.floor(Math.random()*Math.floor(4999))+1}},components:{draggable:k.a},created:function(){this.targetNickname&&this.getUserBase()},computed:{tutorialStep:function(){return this.$store.state.game.user.user.tutorial},tutoDetail:function(){return this.$store.state.game.tutoDetail},ownBase:function(){return this.$store.state.game.mainbase},sent_fights:function(){return this.$store.state.game.sent_fights},allbase:function(){return this.$store.state.game.user.buildings||null},nickname:function(){return this.$store.state.game.user.user.nickname},ownUnits:function(){var t=this,e=[];return this.$store.state.game.user.units.forEach((function(a){a.territory===t.ownBase.territory&&a.base===t.ownBase.base&&a.amount>0&&e.push({key:a.unit,amount:a.amount})})),e},alreadylisted:function(){var t=this,e=[];return localStorage.getItem("farmlist")&&(e=JSON.parse(localStorage.getItem("farmlist"))),!!e.find((function(e){return e.set.territory===t.target&&e.set.location===t.base}))},selectedTotal:function(){var t=0,e=h()(this.drugs_amount)||0,a=h()(this.weapons_amount)||0,s=h()(this.alcohol_amount)||0;return t=e+a+s,t},carry:function(){var t=0;return this.selectedUnits.forEach((function(e){t+=b["units"][e.key].capacity*e.amount})),t},defensivePower:function(){var t=0,e=0;this.$store.state.game.user.units.forEach((function(e){t+=b["units"][e.unit].supply})),e=Math.round(100-p()(t/5).toFixed(0)/100);var a=this.$store.state.game.user.trainings.find((function(t){return"coordination"===t.key||"coordination"===t.training}));return a&&(e+=h()(a.lvl)/10),e>=100?100:e>=65?e:65},offensivePower:function(){var t=0,e=0;this.selectedUnits.forEach((function(e){t+=b["units"][e.key].supply*e.amount})),e=Math.round(100-p()(t/6).toFixed(0)/100);var a=this.$store.state.game.user.trainings.find((function(t){return"coordination"===t.key||"coordination"===t.training}));return a&&(e+=h()(a.lvl)/10),e>=100?100:e>=60?e:60},hasNotEnough:function(){return h()(this.drugs_amount)>this.user.drugs_balance||h()(this.weapons_amount)>this.user.weapons_balance||h()(this.alcohol_amount)>this.user.alcohols_balance},timer:function(){var t=this,e=0,a=0,s=0;this.selectedUnits.forEach((function(t){b["units"][t.key].speed&&60*b["units"][t.key].speed>e&&(e=60*b["units"][t.key].speed)})),this.selectedUnits&&t.target&&(a=Number(t.ownBase.territory)>Number(t.target)?Number(t.ownBase.territory)-Number(t.target):Number(t.target)-Number(t.ownBase.territory));var n=this.$store.state.game.user.trainings.find((function(t){return"routing"===t.training}));return n&&(s=n.lvl),this.selectedUnits&&1===this.selectedUnits.length&&"spy"===this.selectedUnits[0].key&&t.target?e+=a:e+=2*a,e=1e3*(e-e/220*s)},cost:function(){var t=this,e=0,a=0;return a=Number(t.ownBase.territory)>Number(t.target)?Number(t.ownBase.territory)-Number(t.target):Number(t.target)-Number(t.ownBase.territory),this.selectedUnits.forEach((function(t){b["units"][t.key].move_cost&&(e+=b["units"][t.key].move_cost*t.amount)})),"attack"===t.action_type?e*a/100:e*a/200},enemyRankName:function(){var t=10,e=["weak","recruit","grifter","outlaw","enforcer","smuggler","lieutenant","boss","legend","divine","immortal"],a=this.$store.state.game.prizeProps.max_prod[0].max_prod,s=this.enemyProd;return t=Math.floor(s/a*10),e[t]},enemyMaxSupply:function(){var t=this.$store.state.game.prizeProps.max_prod[0].max_prod,e=this.enemyProd,a=Math.floor(e/t*10);0===a&&(a=1);var s=1e4*a;return s},maxSupply:function(){var t=this.$store.state.game.prizeProps.max_prod[0].max_prod,e=this.$store.state.game.user.total_production,a=Math.floor(e/t*10);0===a&&(a=1);var s=1e4*a;return s}},methods:Object(l["a"])({},Object(g["b"])(["missions","init","get_bases","setBase","setTutoDetail"]),{resetForm:function(){this.target=null,this.base=null,this.selectedUnits=[],this.message=null,this.target_type=null},chooseBase:function(t,e,a){this.target=t,this.base=e,this.farm_name="".concat(this.targetNickname," ").concat(a)},chooseActionType:function(t){this.action_type=t,"occupy"===this.action_type&&(this.selectedUnits=[]),"npc"===this.target_type&&this.resetForm()},getUserBase:function(){var t=this;t.bases=null,f["a"].requestAsync("get_user_bases",t.targetNickname).then((function(e){t.bases=e[0],console.log(t.bases[0]),t.chooseBase(t.bases[0].territory,t.bases[0].base,t.bases[0].custom),t.enemyProd=e[1][0].prod_rate,t.isLoading=!1}))},openFarmList:function(){var t=this;t.farmOn=!t.farmOn},listPopup:function(t){this.popupOn=!this.popupOn},saveFarm:function(){var t=this,e=[];localStorage.getItem("farmlist")&&(e=JSON.parse(localStorage.getItem("farmlist")));var a={};this.targetNickname?(a.name="".concat(this.targetNickname," ").concat(this.bases.find((function(e){return e.territory===t.target&&e.base===t.base})).custom),this.farm_name=a.name):a.name="Snollygoster",a.set={territory:this.target,location:this.base},e.push(a),localStorage.setItem("farmlist",u()(e)),this.popupOn=!this.popupOn},progressPercent:function(t,e){var a;return t&&e?(this.up=!1,a=p()(100*t/e).toFixed(2),a):(this.up=!1,0)},removeUnits:function(){this.selectedUnits=[]},handleSubmit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s,n,o,r,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.setTutoDetail(2),this.isLoading=!0,e=this,a={},t.t0=e.action_type,t.next="attack"===t.t0?7:"transport"===t.t0?9:"station"===t.t0?14:"occupy"===t.t0?16:18;break;case 7:return a="npc"===e.target_type?{from_territory:Number(e.ownBase.territory),from_base:Number(e.ownBase.base),territory:Number(e.target),base:Number(e.base),units:e.selectedUnits,type:"fight-npc"}:{from_territory:Number(e.ownBase.territory),from_base:Number(e.ownBase.base),territory:Number(e.target),base:Number(e.base),units:e.selectedUnits,type:"fight",message:e.message||"",private:e.privateAttack},t.abrupt("break",19);case 9:return s=h()(this.drugs_amount)||0,n=h()(this.weapons_amount)||0,o=h()(this.alcohol_amount)||0,s>=0&&n>=0&&o>=0&&(a={from_territory:Number(e.ownBase.territory),from_base:Number(e.ownBase.base),territory:Number(e.target),base:Number(e.base),units:e.selectedUnits,type:"transport",resources:{drugs:s,weapons:n,alcohol:o},message:e.message||""}),t.abrupt("break",19);case 14:return a={from_territory:Number(e.ownBase.territory),from_base:Number(e.ownBase.base),territory:Number(e.target),base:Number(e.base),units:e.selectedUnits,type:"station",message:e.message||""},t.abrupt("break",19);case 16:return a={from_territory:Number(e.ownBase.territory),from_base:Number(e.ownBase.base),territory:Number(e.target),base:Number(e.base),name:e.baseName,units:e.selectedUnits,type:"dw-base"},t.abrupt("break",19);case 18:return t.abrupt("break",19);case 19:return t.next=21,this.validateForm(e.action_type);case 21:r=t.sent,r?(this.resetForm(),this.missions(a).then((function(){"occupy"===e.action_type?y.a.delay(5e3).then((function(){e.init()})):y.a.delay(3e3).then((function(){e.init()})),i.isLoading=!1})).catch((function(t){console.error("Failed to start a fight=",t),i.isLoading=!1}))):this.isLoading=!1;case 23:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),validateForm:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,s,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.errorMessage=null,this.targetNickname&&(a=this.targetNickname.toLowerCase()),"attack"===e&&a===this.nickname&&(this.errorMessage="Attack yourself? Are you serious?"),s=new Date,n=new Date(Date.parse(this.$store.state.game.user.user.punished)),n>s&&(this.errorMessage="Hmm Bad talks are not appropriated in DrugWars, try again after ".concat(n.toLocaleString())),this.baseName||"occupy"!==this.action_type?"occupy"===this.action_type&&this.baseName.length>25?this.errorMessage="Please choose a shorter name for your base":"occupy"===this.action_type&&this.baseName.length<4&&(this.errorMessage="Please choose a longer name for your base"):this.errorMessage="Please choose a name for your base",this.errorMessage||!a){t.next=21;break}return t.prev=8,t.next=11,f["a"].requestAsync("check_user",a);case 11:return o=t.sent,o&&o[0].nickname||(this.errorMessage="Player '".concat(a,"' does not exist")),t.abrupt("return",!this.errorMessage);case 16:return t.prev=16,t.t0=t["catch"](8),this.errorMessage="Player with nickname '".concat(a,"' doesn't exist"),console.error("Player with nickname '".concat(a,"' doesn't exist"),t.t0),t.abrupt("return",!1);case 21:if(!this.errorMessage){t.next=23;break}return t.abrupt("return",!1);case 23:return t.abrupt("return",!this.errorMessage);case 24:case"end":return t.stop()}}),t,this,[[8,16]])})));function e(e){return t.apply(this,arguments)}return e}(),addUnit:function(t){this.setTutoDetail(1);var e=h()(t.amount),a={},s=this.ownUnits.find((function(e){return e.key===t.key}));this.selectedUnits.forEach((function(t){a[t.key]=t.amount})),a[t.key]=a[t.key]?e+h()(a[t.key]):e,a[t.key]>s.amount&&(a[t.key]=h()(s.amount)),a[t.key]<0&&(a[t.key]=0),this.selectedUnits=r()(a).map((function(t){return{key:t,amount:a[t]}}))},makePrivate:function(){this.privateAttack=!this.privateAttack},setRallyPointCoordinates:function(t,e){console.log(t),this.target=t,this.base=e,this.isOpen=!this.isOpen},openInNewTab:function(){var t=this,e="https://simulator.drugwars.io/",a=this.ownUnits.map((function(e){return t.serialize({p:1,key:e.key,n:e.amount})})),s=this.$store.state.game.user.trainings.map((function(e){return t.serialize({p:1,key:e.training,lvl:e.lvl})})),n="player,".concat(a);s&&s.length>0&&(n+=",".concat(s));var o=window.open("".concat(e,"?").concat(n),"_blank");o.focus()},serialize:function(t){var e=[];for(var a in t)t.hasOwnProperty(a)&&e.push("".concat(encodeURIComponent(a),"=").concat(encodeURIComponent(t[a])));return e.join("&")},onEnd:function(){localStorage.setItem("fav_combi",u()(this.favoriteCombinations))},saveCombination:function(){var t=[];localStorage.getItem("fav_combi")&&(t=JSON.parse(localStorage.getItem("fav_combi")));var e=this.selectedUnits.map((function(t){return{key:t.key,amount:t.amount}})),a={};a.name=this.combination_name,a.set=e,t.push(a),this.favoriteCombinations=t,this.combination_name=null,localStorage.setItem("fav_combi",u()(t))},loadCombination:function(t){var e=this,a=[];t.forEach((function(t){e.ownUnits.find((function(e){return e.key===t.key}))&&t.amount<=e.ownUnits.find((function(e){return e.key===t.key})).amount?a.push(t):(e.ownUnits.find((function(e){return e.key===t.key}))&&(t.amount=e.ownUnits.find((function(e){return e.key===t.key})).amount),a.push(t))})),this.selectedUnits=a},deleteCombination:function(t){var e=[];localStorage.getItem("fav_combi")&&(e=JSON.parse(localStorage.getItem("fav_combi")));for(var a=0;a<e.length;a+=1)e[a].name===t&&(e.splice(a,1),a-=1);localStorage.setItem("fav_combi",u()(e)),this.favoriteCombinations=e},loadFarm:function(t){this.target=t.territory,this.base=t.location,this.farmOn=!this.farmOn},deleteFarm:function(t){var e=[];localStorage.getItem("farmlist")&&(e=JSON.parse(localStorage.getItem("farmlist")));for(var a=0;a<e.length;a+=1)e[a].name===t&&(e.splice(a,1),a-=1);localStorage.setItem("farmlist",u()(e)),this.farmlist=e}})},C=w,N=(a("ef16"),a("2877")),U=Object(N["a"])(C,s,n,!1,null,"c7d22a3e",null);e["default"]=U.exports},c872:function(t,e,a){},ef16:function(t,e,a){"use strict";var s=a("c872"),n=a.n(s);n.a}}]);
//# sourceMappingURL=missions.9c2427c7.js.map