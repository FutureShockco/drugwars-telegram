(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["unitssettings"],{"522d":function(t,e,r){"use strict";var a=r("8cd2"),s=r.n(a);s.a},"8cd2":function(t,e,r){},f5b8:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("BootcampTabs"),r("div",{staticClass:"p-4 text-center anim-fade-in"},[r("h2",[t._v("SET RALLY POINT")]),r("h6",[t._v("Define a rally point so all your fresh recruited units will automatically join this base.")]),t.rallyPoint.rally_territory&&t.rallyPoint.rally_base?r("h4",[t._v("Current rally point "),r("div",{staticClass:"text-yellow"},[t._v(t._s(t.rallyPoint.rally_territory)+" : "+t._s(t.rallyPoint.rally_base))])]):r("h4",[t._v("Current rally point "),r("div",{staticClass:"text-yellow"},[t._v(t._s(t.ownBase.territory)+" : "+t._s(t.ownBase.base))])]),r("h5",{staticClass:"text-yellow ddrop mt-0 mb-0",class:{active:t.active},on:{click:function(e){t.isOpen=!t.isOpen,t.active=!t.active}}},[t._v("\n            CHOOSE FROM YOUR BASES\n            "),r("svg",{attrs:{viewBox:"0 0 451.847 451.847",width:"12"}},[r("path",{attrs:{d:"M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751\n\t\tc12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0\n\t\tc12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z",fill:"#fff"}})])]),r("div",{staticClass:"dropdown",class:{isOpen:t.isOpen}},t._l(t.allbase,(function(e){return"headquarters"===e.building&&t.ownBase.territory+""+t.ownBase.base!==e.territory+""+e.base?r("UiButton",{key:e.territory+""+e.base,staticClass:"btn btn-yellow btn-sm rp mr-2",on:{click:function(r){t.setRallyPointCoordinates(e.territory,e.base)}}},[t._v(" \n            "+t._s(e.custom))]):t._e()}))),r("form",{staticClass:"form container-xxs",on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[r("h5",[t._v("   "+t._s(t.upgradeLabel))]),r("UiButton",{staticClass:"button btn-block button-yellow mb-4",attrs:{disabled:t.isLoading||!t.ownBase||!t.target_base||!t.target_territory}},[t.isLoading?r("SmallLoading"):r("span",[t._v("SET RALLY POINT   ")])],1)],1),t.rallyPoint.rally_territory&&t.rallyPoint.rally_base?r("UiButton",{staticClass:"button btn-block button-yellow mt-2 mb-2 container-xxs",attrs:{disabled:t.rallyPoint.rally_territory===t.ownBase.territory&&t.rallyPoint.rally_base===t.ownBase.base},on:{click:function(e){t.resetRallyPoint()}}},[t.isLoading?r("SmallLoading"):r("span",[t._v("RESET RALLY POINT   ")])],1):t._e(),t.errorMessage?r("h4",{staticClass:"text-red"},[t._v("Please select a valid territory")]):t._e()],1)],1)},s=[],i=(r("c5f6"),r("cebc")),n=(r("7514"),r("2f62")),o=(r("7edb"),r("a2b6"),{props:["inProgress"],data:function(){return{isLoading:!1,waitingConfirmation:!1,target_territory:null,target_base:null,base_name:null,errorMessage:null,isOpen:!1,active:!1}},watch:{inProgress:function(t){t&&(this.waitingConfirmation=!1)}},computed:{ownBase:function(){return this.$store.state.game.mainbase},rallyPoint:function(){var t=this;return this.$store.state.game.user.buildings.find((function(e){return e.base===t.ownBase.base&&e.territory===t.ownBase.territory&&"headquarters"===e.building}))},allbase:function(){return this.$store.state.game.user.buildings||null},upgradeLabel:function(){var t="";return this.target_territory&&this.target_base&&(t="You are setting your rally point from ".concat(this.ownBase.territory,":").concat(this.ownBase.base," to ").concat(this.target_territory,":").concat(this.target_base)),t},base:function(){return this.$store.state.game.mainbase}},methods:Object(i["a"])({},Object(n["b"])(["send","init"]),{handleSubmit:function(){var t=this,e=this;if(this.errorMessage=null,!this.errorMessage){this.isLoading=!0;var r={type:"rally-point",from_territory:Number(e.ownBase.territory),from_base:Number(e.ownBase.base),territory:Number(e.target_territory),base:Number(e.target_base)};this.send(r).then((function(){t.isLoading=!1,t.init()})).catch((function(e){t.notify({type:"error",message:"Failed to move base please check that the location is empty and you dont have any fight going from or coming to your base"}),console.error("Failed to move base",e),t.isLoading=!1}))}},resetRallyPoint:function(){var t=this,e=this;if(this.errorMessage=null,!this.errorMessage){this.isLoading=!0;var r={type:"rally-point",from_territory:Number(e.ownBase.territory),from_base:Number(e.ownBase.base),territory:Number(e.ownBase.territory),base:Number(e.ownBase.base)};this.send(r).then((function(){t.isLoading=!1,t.init()})).catch((function(e){t.notify({type:"error",message:"Failed to set rally point"}),console.error("Failed to move base",e),t.isLoading=!1}))}},setRallyPointCoordinates:function(t,e){this.target_territory=t,this.target_base=e,this.isOpen=!this.isOpen}})}),l=o,c=(r("522d"),r("2877")),u=Object(c["a"])(l,a,s,!1,null,"6ecee0be",null);e["default"]=u.exports}}]);
//# sourceMappingURL=unitssettings.259aea27.js.map