{"version":3,"sources":["webpack:///./src/views/Gangs/Diplomacy.vue?406b","webpack:///src/views/Gangs/Diplomacy.vue","webpack:///./src/views/Gangs/Diplomacy.vue?3a94","webpack:///./src/views/Gangs/Diplomacy.vue","webpack:///./src/views/Gangs/Diplomacy.vue?4fa9"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","embassy","lvl","mygang","image","attrs","_e","_v","_s","name","gang","ticker","_l","key","otherEvents","event_type","myEvents","isLoading","lastUpdate","on","$event","handleStop","handleSubmit","staticRenderFns","data","id","$route","params","isInit","gangs","members","message","user","$store","state","game","events","created","load_buildings","computed","isBoss","role","methods","event","type","send","payload","refresh_gang_buildings","load_events","now","Date","parse","next_update","component"],"mappings":"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","file":"js/gang-diplomacy.41ea2437.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('GangsTabs'),_c('div',{staticClass:\"anim-fade-in\"},[(_vm.embassy.lvl > 0)?_c('div',[_c('div',{staticClass:\"p-4 text-center\"},[(_vm.isInit)?_c('Loading'):_c('div',[_c('h1',{staticClass:\"mb-4\"},[(_vm.mygang && _vm.mygang.image)?_c('GangImage',{staticClass:\"mr-3\",attrs:{\"size\":\"120\",\"image\":_vm.mygang.image}}):_vm._e(),(_vm.mygang)?_c('div',[_vm._v(_vm._s(_vm.mygang.name || _vm.mygang.gang))]):_vm._e(),(_vm.mygang.ticker)?_c('span',[_vm._v(\"[\"+_vm._s(_vm.mygang.ticker)+\"]\")]):_vm._e()],1),_c('div',[_c('h3',[_vm._v(\"Choose Action\")]),_vm._l((_vm.gangs),function(gang){return (gang.gang !== _vm.mygang.gang)?_c('div',{key:gang.gang,staticClass:\"py-3 px-0 m-1 columns text-left border-bottom\"},[_c('h2',{staticClass:\"mt-0 column col-6\"},[(gang.image)?_c('GangImage',{staticClass:\"mr-2\",attrs:{\"size\":\"40\",\"image\":gang.image}}):_vm._e(),(gang && gang.ticker)?_c('router-link',{attrs:{\"to\":(\"/gangs/gang/\" + (gang.gang))}},[_vm._v(_vm._s(gang.name || gang.gang)+\" [\"+_vm._s(gang.ticker)+\"]\\n                                    \"),(_vm.otherEvents(gang.gang).event_type ==='alliance' && _vm.myEvents(gang.gang).event_type ==='alliance')?_c('UiButton',{staticClass:\"button ml-2 allies button-green \"},[(!_vm.isLoading)?_c('span',[_vm._v(\"ALLIES\")]):_c('SmallLoading')],1):_vm._e()],1):_vm._e()],1),_c('div',{staticClass:\"column col-6 text-right\"},[(_vm.otherEvents(gang.gang).event_type ==='war' || _vm.myEvents(gang.gang).event_type ==='war')?_c('UiButton',{staticClass:\"button button-blue mb-2\",attrs:{\"disabled\":_vm.isLoading || _vm.otherEvents(gang.gang).event_type ==='war' ||  _vm.lastUpdate(_vm.myEvents(gang.gang)) && _vm.myEvents(gang.gang).event_type ==='war'  || _vm.myEvents(gang.gang).event_type !=='war'},on:{\"click\":function($event){_vm.handleStop('war',gang.gang)}}},[(!_vm.isLoading)?_c('span',[_vm._v(\"stop war\")]):_c('SmallLoading')],1):_c('div',[_c('UiButton',{staticClass:\"button button-red mb-2 mr-2\",attrs:{\"disabled\":_vm.isLoading || _vm.otherEvents(gang.gang).event_type ==='war' || _vm.myEvents(gang.gang).event_type ==='war' || _vm.myEvents(gang.gang).event_type ==='alliance'},on:{\"click\":function($event){_vm.handleSubmit('war',gang.gang)}}},[(!_vm.isLoading)?_c('span',[_vm._v(\"declare war\")]):_c('SmallLoading')],1),_c('UiButton',{staticClass:\"button button-green \",attrs:{\"disabled\":_vm.isLoading || _vm.myEvents(gang.gang).event_type ==='alliance' || _vm.myEvents(gang.gang).event_type ==='war'},on:{\"click\":function($event){_vm.handleSubmit('alliance',gang.gang)}}},[(!_vm.isLoading)?_c('span',[_vm._v(\"offer alliance\")]):_c('SmallLoading')],1)],1),(_vm.otherEvents(gang.gang).event_type ==='alliance' || _vm.myEvents(gang.gang).event_type ==='alliance' )?_c('UiButton',{staticClass:\"button button-blue mb-2 \",attrs:{\"disabled\":_vm.isLoading || _vm.myEvents(gang.gang).event_type !=='alliance'},on:{\"click\":function($event){_vm.handleStop('alliance',gang.gang)}}},[(!_vm.isLoading)?_c('span',[_vm._v(\"stop alliance\")]):_c('SmallLoading')],1):_vm._e(),(_vm.otherEvents(gang.gang).event_type ==='alliance' && _vm.myEvents(gang.gang).event_type !=='alliance')?_c('UiButton',{staticClass:\"button button-blue mb-2 ml-2\",attrs:{\"disabled\":_vm.isLoading || _vm.otherEvents(gang.gang).event_type !=='alliance'},on:{\"click\":function($event){_vm.handleSubmit('alliance',gang.gang)}}},[(!_vm.isLoading)?_c('span',[_vm._v(\"accept alliance\")]):_c('SmallLoading')],1):_vm._e(),(_vm.otherEvents(gang.gang).event_type ==='alliance' && _vm.myEvents(gang.gang).event_type !=='alliance')?_c('UiButton',{staticClass:\"button button-blue mb-2 ml-2\",attrs:{\"disabled\":_vm.isLoading || _vm.otherEvents(gang.gang).event_type !=='alliance'},on:{\"click\":function($event){_vm.handleStop('alliance',gang.gang)}}},[(!_vm.isLoading)?_c('span',[_vm._v(\"refuse alliance\")]):_c('SmallLoading')],1):_vm._e()],1)]):_vm._e()})],2)])],1)]):_c('div',{staticClass:\"p-2 text-center\"},[_c('h2',[_vm._v(\"You must build an embassy first.\")])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <GangsTabs/>\n        <div class=\"anim-fade-in\">\n            <div v-if=\"embassy.lvl > 0\">\n                <div class=\"p-4 text-center\">\n                    <Loading v-if=\"isInit\" />\n                    <div v-else>\n                        <h1 class=\"mb-4\">\n                            <GangImage class=\"mr-3\" size=\"120\" v-if=\"mygang && mygang.image\" :image=\"mygang.image\" />\n                            <div v-if=\"mygang\">{{ mygang.name || mygang.gang }}</div>\n                            <span v-if=\"mygang.ticker\">[{{ mygang.ticker }}]</span>\n                        </h1>\n                        <div>\n                            <h3>Choose Action</h3>\n                            <div class=\"py-3 px-0 m-1 columns text-left border-bottom\" :key=\"gang.gang\" v-for=\"gang in gangs\" v-if=\"gang.gang !== mygang.gang\">\n                                <h2 class=\"mt-0 column col-6\">\n                                    <GangImage class=\"mr-2\" size=\"40\" v-if=\"gang.image\" :image=\"gang.image\" />\n                                    <router-link v-if=\"gang && gang.ticker\" :to=\"`/gangs/gang/${gang.gang}`\">{{ gang.name || gang.gang }} [{{gang.ticker}}]\n                                        <UiButton v-if=\"otherEvents(gang.gang).event_type ==='alliance' && myEvents(gang.gang).event_type ==='alliance'\" class=\"button ml-2 allies button-green \">\n    \t\t\t\t\t\t\t\t\t\t<span v-if=\"!isLoading\">ALLIES</span>\n    \t\t\t\t\t\t\t\t\t\t<SmallLoading v-else/>\n    \t\t\t\t\t\t\t\t\t</UiButton>\n                                    </router-link>\n    \n                                </h2>\n                                <div class=\"column col-6 text-right\">\n                                    <UiButton v-if=\"otherEvents(gang.gang).event_type ==='war' || myEvents(gang.gang).event_type ==='war'\" @click=\"handleStop('war',gang.gang)\" class=\"button button-blue mb-2\" :disabled=\"isLoading || otherEvents(gang.gang).event_type ==='war' ||  lastUpdate(myEvents(gang.gang)) && myEvents(gang.gang).event_type ==='war'  || myEvents(gang.gang).event_type !=='war'\">\n    \t\t\t\t\t\t\t\t\t\t<span v-if=\"!isLoading\">stop war</span>\n    \t\t\t\t\t\t\t\t\t\t<SmallLoading v-else/>\n    \t\t\t\t\t\t\t\t\t</UiButton>\n                                    <div v-else>\n                                        <UiButton @click=\"handleSubmit('war',gang.gang)\" class=\"button button-red mb-2 mr-2\" :disabled=\"isLoading || otherEvents(gang.gang).event_type ==='war' || myEvents(gang.gang).event_type ==='war' || myEvents(gang.gang).event_type ==='alliance'\">\n    \t\t\t\t\t\t\t\t\t\t<span v-if=\"!isLoading\">declare war</span>\n    \t\t\t\t\t\t\t\t\t\t<SmallLoading v-else/>\n    \t\t\t\t\t\t\t\t\t</UiButton>\n                                        <UiButton @click=\"handleSubmit('alliance',gang.gang)\" class=\"button button-green \" :disabled=\"isLoading || myEvents(gang.gang).event_type ==='alliance' || myEvents(gang.gang).event_type ==='war'\">\n    \t\t\t\t\t\t\t\t\t\t<span v-if=\"!isLoading\">offer alliance</span>\n    \t\t\t\t\t\t\t\t\t\t<SmallLoading v-else/>\n    \t\t\t\t\t\t\t\t\t</UiButton>\n                                    </div>\n                                    <UiButton v-if=\"otherEvents(gang.gang).event_type ==='alliance' || myEvents(gang.gang).event_type ==='alliance' \" @click=\"handleStop('alliance',gang.gang)\" class=\"button button-blue mb-2 \" :disabled=\"isLoading || myEvents(gang.gang).event_type !=='alliance'\">\n    \t\t\t\t\t\t\t\t\t\t<span v-if=\"!isLoading\">stop alliance</span>\n    \t\t\t\t\t\t\t\t\t\t<SmallLoading v-else/>\n    \t\t\t\t\t\t\t\t\t</UiButton>\n    \n                                    <UiButton v-if=\"otherEvents(gang.gang).event_type ==='alliance' && myEvents(gang.gang).event_type !=='alliance'\" @click=\"handleSubmit('alliance',gang.gang)\" class=\"button button-blue mb-2 ml-2\" :disabled=\"isLoading || otherEvents(gang.gang).event_type !=='alliance'\">\n    \t\t\t\t\t\t\t\t\t\t<span v-if=\"!isLoading\">accept alliance</span>\n    \t\t\t\t\t\t\t\t\t\t<SmallLoading v-else/>\n    \t\t\t\t\t\t\t\t\t</UiButton>\n                                    <UiButton v-if=\"otherEvents(gang.gang).event_type ==='alliance' && myEvents(gang.gang).event_type !=='alliance'\" @click=\"handleStop('alliance',gang.gang)\" class=\"button button-blue mb-2 ml-2\" :disabled=\"isLoading || otherEvents(gang.gang).event_type !=='alliance'\">\n    \t\t\t\t\t\t\t\t\t\t<span v-if=\"!isLoading\">refuse alliance</span>\n    \t\t\t\t\t\t\t\t\t\t<SmallLoading v-else/>\n    \t\t\t\t\t\t\t\t\t</UiButton>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div v-else class=\"p-2 text-center\">\n                <h2>You must build an embassy first.</h2>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex';\nimport Promise from 'bluebird';\nimport client from '@/helpers/client';\n\nexport default {\n  data() {\n    return {\n      id: this.$route.params.id,\n      isInit: false,\n      isLoading: false,\n      mygang: null,\n      gangs: null,\n      members: null,\n      message: null,\n      user: this.$store.state.game.user.user,\n      events: null,\n    };\n  },\n  created() {\n    this.isLoading = true;\n    this.load_buildings();\n    const promises = [\n      client.requestAsync('get_gangs', null),\n      client.requestAsync('get_gang', this.id),\n      client.requestAsync('get_gang_members', this.id),\n      client.requestAsync('get_gang_events', this.id),\n    ];\n    Promise.all(promises).then(result => {\n      [this.gangs, [this.mygang], this.members, this.events] = result;\n      this.isInit = false;\n      this.isLoading = false;\n    });\n  },\n  computed: {\n    embassy() {\n      return (\n        this.$store.state.game.gang_buildings.find(b => b.building === 'embassy') || {\n          lvl: 0,\n        }\n      );\n    },\n    isBoss() {\n      return this.user.role === 'boss' && this.user.gang === this.id;\n    },\n  },\n  methods: {\n    ...mapActions(['init', 'send', 'notify', 'refresh_gang_buildings']),\n    handleSubmit(type, gang) {\n      this.isLoading = true;\n      const payload = {\n        event: type,\n        gang,\n        type: 'dw-gang-event',\n      };\n      this.send(payload)\n        .then(result => {\n          console.log(result);\n          this.load_events();\n          this.isLoading = false;\n        })\n        .catch(e => {\n          this.notify({ type: 'error', message: 'Failed to create event' });\n          console.error('Failed to create gang', e);\n          this.isLoading = false;\n        });\n    },\n    handleStop(type, gang) {\n      this.isLoading = true;\n\n      const payload = {\n        event: type,\n        gang,\n        type: 'dw-gang-stop-event',\n      };\n      this.send(payload)\n        .then(() => {\n          this.load_events();\n          this.isLoading = false;\n        })\n        .catch(e => {\n          this.notify({ type: 'error', message: 'Failed to create event' });\n          console.error('Failed to create gang', e);\n          this.isLoading = false;\n        });\n    },\n    load_buildings() {\n      this.isLoading = true;\n      this.refresh_gang_buildings()\n        .then(() => {\n          this.isLoading = false;\n        })\n        .catch(e => {\n          console.error('Failed', e);\n          this.isLoading = false;\n        });\n    },\n    load_events() {\n      this.isLoading = true;\n      const promises = [\n        client.requestAsync('get_gangs', null),\n        client.requestAsync('get_gang', this.id),\n        client.requestAsync('get_gang_members', this.id),\n        client.requestAsync('get_gang_events', this.id),\n      ];\n      Promise.all(promises).then(result => {\n        [this.gangs, [this.mygang], this.members, this.events] = result;\n        this.isInit = false;\n        this.isLoading = false;\n      });\n    },\n    otherEvents(gang) {\n      const event = this.events.filter(item => item.gang === gang);\n      if (event[0]) return event[0];\n      return event;\n    },\n    myEvents(gang) {\n      const event = this.events.filter(item => item.others === gang);\n      if (event[0]) return event[0];\n      return event;\n    },\n    lastUpdate(event) {\n      const now = new Date();\n      if (now < new Date(Date.parse(event.next_update))) {\n        return true;\n      }\n\n      return false;\n    },\n  },\n};\n</script>\n\n\n<style scoped lang=\"less\">\n@import '../../vars.less';\n.allies {\n  margin-top: 5px !important;\n  position: absolute;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Diplomacy.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Diplomacy.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Diplomacy.vue?vue&type=template&id=320a5712&scoped=true&\"\nimport script from \"./Diplomacy.vue?vue&type=script&lang=js&\"\nexport * from \"./Diplomacy.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Diplomacy.vue?vue&type=style&index=0&id=320a5712&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"320a5712\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Diplomacy.vue?vue&type=style&index=0&id=320a5712&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Diplomacy.vue?vue&type=style&index=0&id=320a5712&scoped=true&lang=less&\""],"sourceRoot":""}