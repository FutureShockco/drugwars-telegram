{"version":3,"sources":["webpack:///./src/views/Bootcamp/Settings.vue?08ab","webpack:///./src/views/Bootcamp/Settings.vue?3d9b","webpack:///src/views/Bootcamp/Settings.vue","webpack:///./src/views/Bootcamp/Settings.vue?741b","webpack:///./src/views/Bootcamp/Settings.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","rallyPoint","rally_territory","rally_base","_s","ownBase","territory","base","class","active","on","$event","isOpen","attrs","_l","building","key","setRallyPointCoordinates","custom","_e","preventDefault","handleSubmit","upgradeLabel","isLoading","target_base","target_territory","resetRallyPoint","staticRenderFns","props","data","waitingConfirmation","base_name","errorMessage","watch","inProgress","val","computed","$store","state","game","mainbase","user","buildings","find","allbase","label","methods","type","from_territory","Number","self","from_base","send","payload","component"],"mappings":"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","file":"js/unitssettings.259aea27.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=style&index=0&id=6ecee0be&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=style&index=0&id=6ecee0be&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('BootcampTabs'),_c('div',{staticClass:\"p-4 text-center anim-fade-in\"},[_c('h2',[_vm._v(\"SET RALLY POINT\")]),_c('h6',[_vm._v(\"Define a rally point so all your fresh recruited units will automatically join this base.\")]),(_vm.rallyPoint.rally_territory && _vm.rallyPoint.rally_base)?_c('h4',[_vm._v(\"Current rally point \"),_c('div',{staticClass:\"text-yellow\"},[_vm._v(_vm._s(_vm.rallyPoint.rally_territory)+\" : \"+_vm._s(_vm.rallyPoint.rally_base))])]):_c('h4',[_vm._v(\"Current rally point \"),_c('div',{staticClass:\"text-yellow\"},[_vm._v(_vm._s(_vm.ownBase.territory)+\" : \"+_vm._s(_vm.ownBase.base))])]),_c('h5',{staticClass:\"text-yellow ddrop mt-0 mb-0\",class:{ active: _vm.active },on:{\"click\":function($event){_vm.isOpen = !_vm.isOpen, _vm.active = !_vm.active}}},[_vm._v(\"\\n            CHOOSE FROM YOUR BASES\\n            \"),_c('svg',{attrs:{\"viewBox\":\"0 0 451.847 451.847\",\"width\":\"12\"}},[_c('path',{attrs:{\"d\":\"M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751\\n\\t\\tc12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0\\n\\t\\tc12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z\",\"fill\":\"#fff\"}})])]),_c('div',{staticClass:\"dropdown\",class:{ isOpen: _vm.isOpen }},_vm._l((_vm.allbase),function(base){return ( base.building ==='headquarters' && (_vm.ownBase.territory+''+_vm.ownBase.base !== base.territory+''+base.base))?_c('UiButton',{key:(base.territory+''+base.base),staticClass:\"btn btn-yellow btn-sm rp mr-2\",on:{\"click\":function($event){_vm.setRallyPointCoordinates(base.territory,base.base)}}},[_vm._v(\" \\n            \"+_vm._s(base.custom))]):_vm._e()})),_c('form',{staticClass:\"form container-xxs\",on:{\"submit\":function($event){$event.preventDefault();return _vm.handleSubmit($event)}}},[_c('h5',[_vm._v(\"   \"+_vm._s(_vm.upgradeLabel))]),_c('UiButton',{staticClass:\"button btn-block button-yellow mb-4\",attrs:{\"disabled\":_vm.isLoading || !_vm.ownBase ||!_vm.target_base || !_vm.target_territory}},[(_vm.isLoading)?_c('SmallLoading'):_c('span',[_vm._v(\"SET RALLY POINT   \")])],1)],1),(_vm.rallyPoint.rally_territory && _vm.rallyPoint.rally_base)?_c('UiButton',{staticClass:\"button btn-block button-yellow mt-2 mb-2 container-xxs\",attrs:{\"disabled\":_vm.rallyPoint.rally_territory === _vm.ownBase.territory && _vm.rallyPoint.rally_base === _vm.ownBase.base},on:{\"click\":function($event){_vm.resetRallyPoint()}}},[(_vm.isLoading)?_c('SmallLoading'):_c('span',[_vm._v(\"RESET RALLY POINT   \")])],1):_vm._e(),(_vm.errorMessage)?_c('h4',{staticClass:\"text-red\"},[_vm._v(\"Please select a valid territory\")]):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <BootcampTabs/>\n        <div class=\"p-4 text-center anim-fade-in\">\n          <h2>SET RALLY POINT</h2>\n           <h6>Define a rally point so all your fresh recruited units will automatically join this base.</h6>\n           <h4 v-if=\"rallyPoint.rally_territory && rallyPoint.rally_base\">Current rally point <div class=\"text-yellow\">{{rallyPoint.rally_territory}} : {{rallyPoint.rally_base}}</div></h4>\n           <h4 v-else>Current rally point <div class=\"text-yellow\">{{ownBase.territory}} : {{ownBase.base}}</div></h4>\n\n          <h5\n            class=\"text-yellow ddrop mt-0 mb-0\"\n            @click=\"isOpen = !isOpen, active = !active\"\n            :class=\"{ active }\"\n          >\n            CHOOSE FROM YOUR BASES\n            <svg viewBox=\"0 0 451.847 451.847\" width=\"12\">\n              <path\n                d=\"M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751\n\t\tc12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0\n\t\tc12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z\"\n                fill=\"#fff\"\n              />\n            </svg>\n          </h5>\n        <div :class=\"{ isOpen }\" class=\"dropdown\">\n          <UiButton\n            class=\"btn btn-yellow btn-sm rp mr-2\"\n            v-for=\"base in allbase\"  @click=\"setRallyPointCoordinates(base.territory,base.base)\"\n            v-if=\" base.building ==='headquarters' && (ownBase.territory+''+ownBase.base !== base.territory+''+base.base)\"\n            :key=\"(base.territory+''+base.base)\"\n          > \n            {{base.custom }}</UiButton>\n          </div>\n            <form class=\"form container-xxs\" @submit.prevent=\"handleSubmit\">\n              <h5>   {{ upgradeLabel }}</h5>\n            <UiButton\n              :disabled=\"isLoading || !ownBase ||!target_base || !target_territory\"\n              class=\"button btn-block button-yellow mb-4\">\n            \n                             <SmallLoading v-if=\"isLoading\" />\n          <span v-else>SET RALLY POINT   </span>\n            </UiButton>\n            </form>\n                        <UiButton\n              v-if=\"rallyPoint.rally_territory && rallyPoint.rally_base\" @click=\"resetRallyPoint()\"\n              :disabled=\"rallyPoint.rally_territory === ownBase.territory && rallyPoint.rally_base === ownBase.base\"\n              class=\"button btn-block button-yellow mt-2 mb-2 container-xxs\">\n                   <SmallLoading v-if=\"isLoading\" />\n          <span v-else>RESET RALLY POINT   </span>\n            </UiButton>\n            <h4 v-if=\"errorMessage\" class=\"text-red\">Please select a valid territory</h4>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex';\nimport { utils } from 'drugwars';\nimport { getBalances } from '@/helpers/utils';\n\nexport default {\n  props: ['inProgress'],\n  data() {\n    return {\n      isLoading: false,\n      waitingConfirmation: false,\n      target_territory: null,\n      target_base: null,\n      base_name: null,\n      errorMessage: null,\n      isOpen: false,\n      active: false,\n    };\n  },\n  watch: {\n    inProgress(val) {\n      if (val) {\n        this.waitingConfirmation = false;\n      }\n    },\n  },\n  computed: {\n    ownBase() {\n      return this.$store.state.game.mainbase;\n    },\n    rallyPoint() {\n      return this.$store.state.game.user.buildings.find(\n        b =>\n          b.base === this.ownBase.base &&\n          b.territory === this.ownBase.territory &&\n          b.building === 'headquarters',\n      );\n    },\n    allbase() {\n      return this.$store.state.game.user.buildings || null;\n    },\n    upgradeLabel() {\n      let label = '';\n      if (this.target_territory && this.target_base)\n        label = `You are setting your rally point from ${this.ownBase.territory}:${\n          this.ownBase.base\n        } to ${this.target_territory}:${this.target_base}`;\n      return label;\n    },\n    base() {\n      return this.$store.state.game.mainbase;\n    },\n  },\n  methods: {\n    ...mapActions(['send', 'init']),\n    handleSubmit() {\n      const self = this;\n      this.errorMessage = null;\n      if (!this.errorMessage) {\n        this.isLoading = true;\n        const payload = {\n          type: 'rally-point',\n          from_territory: Number(self.ownBase.territory),\n          from_base: Number(self.ownBase.base),\n          territory: Number(self.target_territory),\n          base: Number(self.target_base),\n        };\n        this.send(payload)\n          .then(() => {\n            this.isLoading = false;\n            this.init();\n          })\n          .catch(e => {\n            this.notify({\n              type: 'error',\n              message:\n                'Failed to move base please check that the location is empty and you dont have any fight going from or coming to your base',\n            });\n            console.error('Failed to move base', e);\n            this.isLoading = false;\n          });\n      }\n    },\n    resetRallyPoint() {\n      const self = this;\n      this.errorMessage = null;\n      if (!this.errorMessage) {\n        this.isLoading = true;\n        const payload = {\n          type: 'rally-point',\n          from_territory: Number(self.ownBase.territory),\n          from_base: Number(self.ownBase.base),\n          territory: Number(self.ownBase.territory),\n          base: Number(self.ownBase.base),\n        };\n        this.send(payload)\n          .then(() => {\n            this.isLoading = false;\n            this.init();\n          })\n          .catch(e => {\n            this.notify({\n              type: 'error',\n              message: 'Failed to set rally point',\n            });\n            console.error('Failed to move base', e);\n            this.isLoading = false;\n          });\n      }\n    },\n    setRallyPointCoordinates(territory, base) {\n      this.target_territory = territory;\n      this.target_base = base;\n      this.isOpen = !this.isOpen;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.checkout {\n  text-align: center;\n  width: 180px;\n}\n\n.dwdicon {\n  width: 22px;\n  left: 0px;\n  position: relative;\n  float: left;\n  top: 5px;\n}\n\n.dropdown {\n  left: 50%;\n  transform: translatey(-30%) rotatex(90deg) scale(0);\n  margin-top: 0.55em;\n  transform-origin: 0 0;\n  border-radius: 0.35em;\n  display: none;\n  opacity: 0;\n  transition: all 200ms linear;\n\n  &.isOpen {\n    transform: translatey(0%);\n    display: block;\n    opacity: 1;\n  }\n}\n\n.rp {\n  padding: 5px;\n  background: black;\n  color: #ffc508;\n  z-index: 999999;\n  text-transform: uppercase;\n}\n\n.rp:hover {\n  background: #ffc508;\n  color: black;\n  font-weight: bold;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Settings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Settings.vue?vue&type=template&id=6ecee0be&scoped=true&\"\nimport script from \"./Settings.vue?vue&type=script&lang=js&\"\nexport * from \"./Settings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Settings.vue?vue&type=style&index=0&id=6ecee0be&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6ecee0be\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}